<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½œæ¥­ç ”ç©¶ç·šæ€§è¦åŠƒå–®å½¢æ³•</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
            --purple: #9b59b6;
            --orange: #e67e22;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--light);
            padding: 20px;
            min-height: 100vh;
            overflow-x: auto;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, #a8e6cf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: none;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1000px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .panel-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .icon {
            font-size: 1.5rem;
        }
        
        .problem-input {
            display: grid;
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: var(--light);
            font-size: 1rem;
        }
        
        input, select, textarea {
            padding: 14px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            transform: translateY(-2px);
        }
        
        button {
            background: linear-gradient(45deg, var(--secondary), var(--purple));
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, Rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background: linear-gradient(45deg, #7f8c8d, #95a5a6);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .controls button {
            flex: 1;
        }
        
        .btn-reset {
            background: linear-gradient(45deg, var(--accent), #c0392b);
        }
        
        .btn-next {
            background: linear-gradient(45deg, var(--success), #27ae60);
        }
        
        .btn-prev {
            background: linear-gradient(45deg, var(--warning), #d68910);
        }
        
        .result-panel {
            grid-column: 1 / -1;
        }
        
        .tableau-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.1);
            padding: 15px;
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        th {
            background: linear-gradient(45deg, var(--dark), var(--primary));
            padding: 16px 12px;
            text-align: center;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
        }
        
        td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        tr:hover td {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
            font-weight: bold;
            position: relative;
            animation: pulse 2s infinite;
        }
        
        .pivot::after {
            content: "ğŸ¯ æ¨è»¸";
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 6px;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
        
        .basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }
        
        .solution-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .solution-card {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .solution-card h3 {
            margin-bottom: 15px;
            color: var(--light);
            font-size: 1.2rem;
        }
        
        .solution-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--success), #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .variables {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .variable {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
            padding: 10px 18px;
            border-radius: 25px;
            font-weight: 600;
            border: 1px solid rgba(52, 152, 219, 0.5);
        }
        
        .step-info {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        .step-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .case-description {
            background: linear-gradient(145deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));
            border: 2px solid rgba(52, 152, 219, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            line-height: 1.7;
        }
        
        .case-description h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            margin-top: 25px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .case-description h3:first-child {
            margin-top: 0;
        }
        
        .case-description ul {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        .case-description li {
            margin-bottom: 10px;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 30px;
            background: linear: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 20px;
            line-height: 1.8;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .instructions h2 {
            margin-bottom: 20px;
            color: white;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .instructions ul {
            padding-left: 30px;
            margin-top: 15px;
        }
        
        .instructions li {
            margin-bottom: 15px;
        }
        
        .instructions code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            color: var(--warning);
            font-weight: 600;
        }
        
        .highlight {
            color: var(--success);
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
        }
        
        .legend-pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
        }
        
        .legend-basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .legend-entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }
        
        .error-message {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.2), rgba(192, 57, 43, 0.2));
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 18px;
            margin: 15px 0;
            color: white;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            line-height: 1.6;
        }
        
        .algorithm-info {
            background: linear-gradient(145deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
            border: 2px solid rgba(155, 89, 182, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            line-height: 1.7;
        }
        
        .algorithm-info h3 {
            color: var(--purple);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .step-counter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .counter {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¯ ä½œæ¥­ç ”ç©¶ç·šæ€§è¦åŠƒå–®è¡Œæ³•</h1>
            <p class="subtitle">
                æ­¤å·¥å…·æ¡ç”¨å–®è¡Œæ³• (Simplex Method) æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œï¼Œä¸¦æä¾›å®Œæ•´çš„è¨ˆç®—éç¨‹å¯è¦–åŒ–ã€‚
                é©ç”¨æ–¼ç”Ÿç”¢è¦åŠƒã€è³‡æºåˆ†é…ã€åˆ©æ½¤æœ€å¤§åŒ–ç­‰å¯¦éš›å•†æ¥­å•é¡Œçš„æ±‚è§£èˆ‡æ•™å­¸ã€‚
            </p>
        </header>
        
        <div class="content">
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“Š</span>
                    å•é¡Œè¼¸å…¥
                </h2>
                <div class="problem-input">
                    <div class="input-group">
                        <label for="objective">ğŸ¯ ç›®æ¨™å‡½æ•¸é¡å‹</label>
                        <select id="objective">
                            <option value="max">æœ€å¤§åŒ– (Maximize)</option>
                            <option value="min">æœ€å°åŒ– (Minimize)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="function">ğŸ’° ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ (ç”¨é€—è™Ÿåˆ†éš”ï¼Œä¾‹å¦‚: 800,1200)</label>
                        <input type="text" id="function" value="800,1200" placeholder="ä¾‹å¦‚: 800,1200">
                    </div>
                    
                    <div class="input-group">
                        <label for="constraints">âš–ï¸ ç´„æŸæ¢ä»¶ (æ¯è¡Œä¸€å€‹ç´„æŸï¼Œæ ¼å¼: ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸)</label>
                        <textarea id="constraints" rows="6">4,6,<=,2400
2,2,<=,800
1,3,<=,900
1,0,<=,300
0,1,<=,250</textarea>
                    </div>
                    
                    <button id="solve-btn">ğŸš€ æ±‚è§£å•é¡Œ</button>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ®</span>
                    è¨ˆç®—æ§åˆ¶
                </h2>
                
                <div class="step-counter">
                    <span>ç•¶å‰æ­¥é©Ÿï¼š</span>
                    <span class="counter" id="step-counter">0 / 0</span>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                
                <div class="controls">
                    <button id="prev-btn" class="btn-prev" disabled>â¬…ï¸ ä¸Šä¸€æ­¥</button>
                    <button id="next-btn" class="btn-next" disabled>ä¸‹ä¸€æ­¥ â¡ï¸</button>
                    <button id="reset-btn" class="btn-reset">ğŸ”„ é‡ç½®</button>
                </div>
                
                <div class="step-info">
                    <h3 class="step-title">
                        <span>ğŸ“</span>
                        æ­¥é©Ÿèªªæ˜
                    </h3>
                    <p id="step-description">é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚</p>
                </div>
                
                <div class="solution-box">
                    <div class="solution-card">
                        <h3>ğŸ­ æœ€å„ªè§£ (ç”Ÿç”¢æ•¸é‡)</h3>
                        <div class="variables" id="solution-variables">
                            <div class="variable">5nmæ™¶ç‰‡ = <span id="x1">0</span> ç‰‡</div>
                            <div class="variable">3nmæ™¶ç‰‡ = <span id="x2">0</span> ç‰‡</div>
                        </div>
                    </div>
                    
                    <div class="solution-card">
                        <h3>ğŸ’° æœ€å¤§åˆ©æ½¤</h3>
                        <div class="solution-value" id="optimal-value">0</div>
                        <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.8;">è¬å°å¹£</div>
                    </div>
                </div>
            </div>
            
            <div class="panel result-panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“‹</span>
                    å–®å½¢è¡¨è¨ˆç®—éç¨‹
                </h2>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color legend-pivot"></div>
                        <span>æ¨è»¸å…ƒç´  (Pivot Element)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-basis"></div>
                        <span>åŸºè®Šé‡ (Basic Variables)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-entering"></div>
                        <span>é€²å…¥è®Šé‡ (Entering Variable)</span>
                    </div>
                </div>
                
                <div class="tableau-container" id="tableau-container">
                    <p class="step-info">è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="case-description">
            <h3>ğŸ¢ å¯¦éš›æ¡ˆä¾‹ï¼šå°ç©é›»æ™¶ç‰‡ç”Ÿç”¢è¦åŠƒ</h3>
            <p>
                æœ¬å·¥å…·ä»¥å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ç‚ºä¾‹ï¼Œå±•ç¤ºç·šæ€§è¦åŠƒåœ¨å¯¦éš›è£½é€ æ¥­ä¸­çš„æ‡‰ç”¨ã€‚
                å‡è¨­å°ç©é›»éœ€è¦æ±ºå®š5nmå’Œ3nmæ™¶ç‰‡çš„æœ€å„ªç”Ÿç”¢é…ç½®ï¼Œä»¥æœ€å¤§åŒ–åˆ©æ½¤ã€‚
            </p>
            
            <h3>ğŸ“Š å•é¡Œè¨­å®š</h3>
            <ul>
                <li><strong>æ±ºç­–è®Šé‡ï¼š</strong>xâ‚ = 5nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡ï¼Œxâ‚‚ = 3nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡</li>
                <li><strong>ç›®æ¨™å‡½æ•¸ï¼š</strong>æœ€å¤§åŒ–åˆ©æ½¤ = 800xâ‚ + 1200xâ‚‚ (è¬å°å¹£)</li>
                <li><strong>ç´„æŸæ¢ä»¶ï¼š</strong>
                    <ul>
                        <li>è¨­å‚™æ™‚é–“é™åˆ¶ï¼š4xâ‚ + 6xâ‚‚ â‰¤ 2400 (å°æ™‚)</li>
                        <li>åŸæ–™é™åˆ¶ï¼š2xâ‚ + 2xâ‚‚ â‰¤ 800 (å–®ä½)</li>
                        <li>æŠ€è¡“äººå“¡é™åˆ¶ï¼šxâ‚ + 3xâ‚‚ â‰¤ 900 (äººæ™‚)</li>
                        <li>5nmç”¢èƒ½ä¸Šé™ï¼šxâ‚ â‰¤ 300 (ç‰‡)</li>
                        <li>3nmç”¢èƒ½ä¸Šé™ï¼šxâ‚‚ â‰¤ 250 (ç‰‡)</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
            <ul>
                <li>ç†è§£ç·šæ€§è¦åŠƒå•é¡Œçš„æ¨™æº–å½¢å¼è½‰æ›</li>
                <liÎ½Î¿Î¼: æŒæ¡å–®å½¢æ³•çš„è¨ˆç®—æ­¥é©Ÿèˆ‡æ¨è»¸é‹ç®—</li>
                <li>å­¸ç¿’å¦‚ä½•è§£è®€å–®å½¢è¡¨ä¸­çš„æ•¸æ“šæ„ç¾©</li>
                <li>äº†è§£åŸºè®Šé‡ã€éåŸºè®Šé‡çš„æ¦‚å¿µ</li>
                <li>æŒæ¡æœ€å„ªæ€§æª¢é©—èˆ‡è§£çš„åˆ¤å®š</li>
            </ul>
        </div>
        
        <div class="algorithm-info">
            <h3>ğŸ§® å–®å½¢æ³•ç®—æ³•èªªæ˜</h3>
            <p>
                å–®è¡Œæ³• (Simplex Method) æ˜¯æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œæœ€ç¶“å…¸çš„ç®—æ³•ï¼Œç”± George Dantzig æ–¼1947å¹´æå‡ºã€‚
                è©²ç®—æ³•é€šéç³»çµ±æ€§åœ°ç§»å‹•åˆ°ç›¸é„°çš„åŸºå¯è¡Œè§£ï¼Œé€æ­¥æ”¹å–„ç›®æ¨™å‡½æ•¸å€¼ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å„ªè§£ã€‚
            </p>
            <ul>
                <li><strong>ç¬¬ä¸€æ­¥ï¼š</strong>å°‡å•é¡Œè½‰æ›ç‚ºæ¨™æº–å½¢å¼ï¼Œæ·»åŠ é¬†å¼›è®Šæ•¸</li>
                <li><strong>ç¬¬äºŒæ­¥ï¼š</strong>å»ºç«‹åˆå§‹å–®å½¢è¡¨ï¼Œæ‰¾åˆ°åˆå§‹åŸºå¯è¡Œè§£</li>
                <li><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>æª¢æŸ¥æœ€å„ªæ€§æ¢ä»¶ï¼ˆç›®æ¨™å‡½æ•¸è¡Œä¿‚æ•¸ï¼‰</li>
                <li><strong>ç¬¬å››æ­¥ï¼š</strong>è‹¥æœªé”æœ€å„ªï¼Œé¸æ“‡é€²å…¥è®Šæ•¸å’Œé›¢é–‹è®Šæ•¸</li>
                <li><strong>ç¬¬äº”æ­¥ï¼š</strong>åŸ·è¡Œæ¨è»¸é‹ç®—ï¼Œæ›´æ–°å–®å½¢è¡¨</li>
                <li><strong>é‡è¤‡æ­¥é©Ÿ3-5</strong>ç›´åˆ°é”åˆ°æœ€å„ªè§£</li>
            </ul>
        </div>
        
        <div class="instructions">
            <h2>ğŸ“– è©³ç´°ä½¿ç”¨èªªæ˜</h2>
            <ul>
                <li><span class="highlight">ç›®æ¨™å‡½æ•¸è¨­å®š</span>ï¼šè¼¸å…¥ç›®æ¨™å‡½æ•¸çš„ä¿‚æ•¸ï¼Œç”¨é€—è™Ÿåˆ†éš”ã€‚ä¾‹å¦‚æœ€å¤§åŒ–åˆ©æ½¤ z = 800xâ‚ + 1200xâ‚‚ æ‡‰è¼¸å…¥ <code>800,1200</code></li>
                <li><span class="highlight">ç´„æŸæ¢ä»¶æ ¼å¼</span>ï¼šæ¯è¡Œè¼¸å…¥ä¸€å€‹ç´„æŸæ¢ä»¶ï¼Œæ ¼å¼ç‚º <code>ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸</code>ã€‚ä¾‹å¦‚ 4xâ‚ + 6xâ‚‚ â‰¤ 2400 æ‡‰è¼¸å…¥ <code>4,6,<=,2400</code></li>
                <li><span class="highlight">æ”¯æŒé‹ç®—ç¬¦</span>ï¼š<code>&lt;=</code> (å°æ–¼ç­‰æ–¼), <code>=</code> (ç­‰æ–¼), <code>&gt;=</code> (å¤§æ–¼ç­‰æ–¼)</li>
                <li><span class="highlight">æ±‚è§£éç¨‹</span>ï¼šé»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•è¨ˆç®—ä¸¦é¡¯ç¤ºåˆå§‹å–®å½¢è¡¨</li>
                <li><span class="highlight">é€æ­¥æ¼”ç¤º</span>ï¼šä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥è¨ˆç®—éç¨‹</li>
                <li><span class="highlight">è¦–è¦ºåŒ–å…ƒç´ </span>ï¼šè¡¨æ ¼ä¸­ä¸åŒé¡è‰²æ¨™ç¤ºä¸åŒé¡å‹çš„è®Šæ•¸å’Œæ“ä½œ</li>
                <li><span class="highlight">é€²åº¦è¿½è¹¤</span>ï¼šé ‚éƒ¨é€²åº¦æ¢é¡¯ç¤ºç•¶å‰æ±‚è§£é€²åº¦</li>
            </ul>
        </div>
        
        <footer>
            <p><strong>ğŸ“ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–æ•™å­¸å·¥å…·</strong></p>
            <p>
                æœ¬å·¥å…·å°ˆç‚ºç·šæ€§è¦åŠƒæ•™å­¸è¨­è¨ˆï¼Œå¹«åŠ©å­¸ç”Ÿç†è§£å–®å½¢æ³•çš„è¨ˆç®—åŸç†å’Œå¯¦éš›æ‡‰ç”¨ã€‚
                é©ç”¨æ–¼é‹ç±Œå­¸ã€ç®¡ç†ç§‘å­¸ã€å·¥æ¥­å·¥ç¨‹ç­‰ç›¸é—œèª²ç¨‹çš„æ•™å­¸èˆ‡è‡ªå­¸ã€‚
            </p>
            <p style="margin-top: 15px;">
                <em>ğŸ’¡ æç¤ºï¼šå»ºè­°é…åˆæ•™ç§‘æ›¸å…§å®¹ä½¿ç”¨ï¼Œæ·±å…¥ç†è§£</em>
            </p>
        </footer>
    </div>

    <script>
        // å„²å­˜å–®å½¢æ³•è¿­ä»£æ­·å²
        let tableauHistory = [];
        let currentStep = 0;
        let basisVariables = [];

        // åˆå§‹åŒ–æŒ‰éˆ•äº‹ä»¶
        document.getElementById('solve-btn').addEventListener('click', solveProblem);
        document.getElementById('next-btn').addEventListener('click', showNextStep);
        document.getElementById('prev-btn').addEventListener('click', showPreviousStep);
        document.getElementById('reset-btn').addEventListener('click', reset);

        function solveProblem() {
            // é‡ç½®ç‹€æ…‹
            tableauHistory = [];
            currentStep = 0;
            basisVariables = [];

            // è§£æè¼¸å…¥
            const objectiveType = document.getElementById('objective').value;
            const objectiveInput = document.getElementById('function').value;
            const constraintsInput = document.getElementById('constraints').value;

            // é©—è­‰ç›®æ¨™å‡½æ•¸
            const objectiveCoefficients = objectiveInput.split(',')
                .map(x => parseFloat(x.trim()))
                .filter(x => !isNaN(x));
            if (objectiveCoefficients.length < 1) {
                displayError('è«‹è¼¸å…¥æœ‰æ•ˆçš„ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ï¼ˆä¾‹å¦‚ï¼š800,1200ï¼‰ã€‚');
                return;
            }

            // è§£æç´„æŸæ¢ä»¶
            const constraints = constraintsInput.split('\n')
                .map(line => line.trim())
                .filter(line => line !== '')
                .map(line => {
                    const parts = line.split(',');
                    if (parts.length < 3) return null;
                    const coefficients = parts.slice(0, -2)
                        .map(x => parseFloat(x.trim()))
                        .filter(x => !isNaN(x));
                    const operator = parts[parts.length - 2].trim();
                    const rhs = parseFloat(parts[parts.length - 1]);
                    if (coefficients.length !== objectiveCoefficients.length || !['<=', '=', '>='].includes(operator) || isNaN(rhs)) {
                        return null;
                    }
                    return { coefficients, operator, rhs };
                })
                .filter(c => c !== null);

            if (constraints.length === 0) {
                displayError('è«‹è¼¸å…¥è‡³å°‘ä¸€å€‹æœ‰æ•ˆçš„ç´„æŸæ¢ä»¶ï¼ˆæ ¼å¼ï¼šä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸ï¼‰ã€‚');
                return;
            }

            // åˆå§‹åŒ–å–®å½¢è¡¨
            try {
                const tableau = initializeTableau(objectiveCoefficients, constraints, objectiveType);
                tableauHistory.push({
                    tableau: JSON.parse(JSON.stringify(tableau.tableau)),
                    basis: [...tableau.basis],
                    description: 'åˆå§‹å–®å½¢è¡¨å·²å»ºç«‹ï¼Œæº–å‚™é€²è¡Œæœ€å„ªæ€§æª¢æŸ¥ã€‚'
                });

                // åŸ·è¡Œå–®å½¢æ³•
                runSimplex(tableau, objectiveType);

                // é¡¯ç¤ºç¬¬ä¸€æ­¥
                currentStep = 0;
                updateUI();
                document.getElementById('next-btn').disabled = tableauHistory.length <= 1;
                document.getElementById('prev-btn').disabled = true;
            } catch (e) {
                displayError(`éŒ¯èª¤ï¼š${e.message}`);
            }
        }

        function initializeTableau(objective, constraints, type) {
            const numVars = objective.length;
            const numConstraints = constraints.length;
            const tableau = [];
            const basis = [];

            // æ·»åŠ ç´„æŸæ¢ä»¶è¡Œ
            constraints.forEach((constraint, i) => {
                const row = [...constraint.coefficients];
                // æ·»åŠ é¬†å¼›/å‰©é¤˜è®Šé‡
                for (let j = 0; j < numConstraints; j++) {
                    if (constraint.operator === '<=') {
                        row[numVars + j] = i === j ? 1 : 0; // é¬†å¼›è®Šé‡
                    } else if (constraint.operator === '>=') {
                        row[numVars + j] = i === j ? -1 : 0; // å‰©é¤˜è®Šé‡
                        row[numVars + numConstraints + i] = i === j ? 1 : 0; // äººå·¥è®Šé‡ï¼ˆå¾ŒçºŒå¯¦ç¾ï¼‰
                    } else {
                        row[numVars + j] = i === j ? 1 : 0; // ç­‰å¼ç´„æŸè¦–ç‚ºé¬†å¼›
                    }
                }
                row.push(constraint.rhs);
                tableau.push(row);
                basis.push(numVars + i); // åˆå§‹åŸºè®Šé‡ç‚ºé¬†å¼›è®Šé‡
            });

            // æ·»åŠ ç›®æ¨™å‡½æ•¸è¡Œ
            const objRow = objective.map(x => (type === 'max' ? -x : x));
            for (let i = 0; i < numConstraints; i++) {
                objRow[numVars + i] = 0;
                if (constraints[i].operator === '>=') {
                    objRow[numVars + numConstraints + i] = 0; // äººå·¥è®Šé‡ï¼ˆå¾ŒçºŒå¯¦ç¾ï¼‰
                }
            }
            objRow.push(0);
            tableau.push(objRow);

            return { tableau, basis };
        }

        function runSimplex(tableauObj, objectiveType) {
            let { tableau, basis } = tableauObj;
            let iteration = 0;
            const maxIterations = 100; // é˜²æ­¢ç„¡é™è¿´åœˆ

            while (iteration < maxIterations) {
                // æª¢æŸ¥æœ€å„ªæ€§
                const objRow = tableau[tableau.length - 1];
                const pivotCol = objectiveType === 'max'
                    ? objRow.slice(0, -1).reduce((minIdx, val, idx) => val < objRow[minIdx] ? idx : minIdx, 0)
                    : objRow.slice(0, -1).reduce((maxIdx, val, idx) => val > objRow[maxIdx] ? idx : maxIdx, 0);

                if ((objectiveType === 'max' && objRow[pivotCol] >= 0) || (objectiveType === 'min' && objRow[pivotCol] <= 0)) {
                    tableauHistory.push({
                        tableau: JSON.parse(JSON.stringify(tableau)),
                        basis: [...basis],
                        description: 'å·²é”åˆ°æœ€å„ªè§£ï¼Œè¨ˆç®—å®Œæˆã€‚'
                    });
                    break;
                }

                // æœ€å°æ¯”ç‡æ¸¬è©¦
                let minRatio = Infinity;
                let pivotRow = -1;
                for (let i = 0; i < tableau.length - 1; i++) {
                    if (tableau[i][pivotCol] > 0) {
                        const ratio = tableau[i][tableau[0].length - 1] / tableau[i][pivotCol];
                        if (ratio < minRatio && ratio >= 0) {
                            minRatio = ratio;
                            pivotRow = i;
                        }
                    }
                }

                if (pivotRow === -1) {
                    throw new Error('å•é¡Œç„¡ç•Œï¼Œç„¡æ³•æ‰¾åˆ°æœ‰é™çš„æœ€å„ªè§£ã€‚');
                }

                // åŸ·è¡Œæ¨è»¸é‹ç®—
                const pivotValue = tableau[pivotRow][pivotCol];
                for (let j = 0; j < tableau[0].length; j++) {
                    tableau[pivotRow][j] /= pivotValue;
                }

                for (let i = 0; i < tableau.length; i++) {
                    if (i !== pivotRow) {
                        const factor = tableau[i][pivotCol];
                        for (let j = 0; j < tableau[0].length; j++) {
                            tableau[i][j] -= factor * tableau[pivotRow][j];
                        }
                    }
                }

                // æ›´æ–°åŸºè®Šé‡
                basis[pivotRow] = pivotCol;

                // è¨˜éŒ„æ­¥é©Ÿ
                tableauHistory.push({
                    tableau: JSON.parse(JSON.stringify(tableau)),
                    basis: [...basis],
                    description: `è¿­ä»£ ${iteration + 1}ï¼šé¸æ“‡é€²å…¥è®Šé‡ x${pivotCol + 1}ï¼Œé›¢é–‹è®Šé‡ x${basis[pivotRow] + 1}ï¼Œæ¨è»¸å…ƒç´ ä½æ–¼ç¬¬ ${pivotRow + 1} è¡Œï¼Œç¬¬ ${pivotCol + 1} åˆ—ã€‚`
                });

                iteration++;
            }

            if (iteration >= maxIterations) {
                throw new Error('è¿­ä»£æ¬¡æ•¸éå¤šï¼Œå¯èƒ½å­˜åœ¨é€€åŒ–æˆ–ç„¡è§£å•é¡Œã€‚');
            }
        }

        function updateUI() {
            const step = tableauHistory[currentStep];
            if (!step) return;

            // æ›´æ–°å–®å½¢è¡¨
            renderTableau(step.tableau, step.basis);

            // æ›´æ–°æ­¥é©Ÿèªªæ˜
            document.getElementById('step-description').textContent = step.description;

            // æ›´æ–°æ­¥é©Ÿè¨ˆæ•¸å™¨å’Œé€²åº¦æ¢
            document.getElementById('step-counter').textContent = `${currentStep + 1} / ${tableauHistory.length}`;
            const progress = (currentStep / (tableauHistory.length - 1)) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;

            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.getElementById('next-btn').disabled = currentStep >= tableauHistory.length - 1;
            document.getElementById('prev-btn').disabled = currentStep <= 0;

            // æ›´æ–°è§£æ±ºæ–¹æ¡ˆ
            if (currentStep === tableauHistory.length - 1) {
                const solution = extractSolution(step.tableau, step.basis);
                document.getElementById('solution-variables').innerHTML = solution.variables
                    .map((val, i) => `<div class="variable">x${i + 1} = <span id="x${i + 1}">${val.toFixed(2)}</span> ç‰‡</div>`)
                    .join('');
                document.getElementById('optimal-value').textContent = solution.optimalValue.toFixed(2);
            } else {
                document.getElementById('solution-variables').innerHTML = '<div class="variable">å°šæœªé”åˆ°æœ€å„ªè§£</div>';
                document.getElementById('optimal-value').textContent = '0';
            }
        }

        function renderTableau(tableau, basis) {
            const container = document.getElementById('tableau-container');
            const numVars = tableau[0].length - 1 - (tableau.length - 1); // åŸè®Šé‡æ•¸
            const numSlack = tableau.length - 1; // é¬†å¼›è®Šé‡æ•¸
            let html = '<table><thead><tr>';
            
            // ç”Ÿæˆè¡¨é ­
            for (let i = 0; i < numVars; i++) {
                html += `<th>x${i + 1}</th>`;
            }
            for (let i = 0; i < numSlack; i++) {
                html += `<th>s${i + 1}</th>`;
            }
            html += '<th>RHS</th></tr></thead><tbody>';

            // ç”Ÿæˆè¡¨æ ¼å…§å®¹
            tableau.forEach((row, rowIndex) => {
                html += '<tr>';
                row.forEach((cell, colIndex) => {
                    let cellClass = '';
                    if (rowIndex < tableau.length - 1 && basis[rowIndex] === colIndex) {
                        cellClass = 'basis';
                    }
                    if (rowIndex === tableau.length - 1 && colIndex < row.length - 1 && 
                        ((document.getElementById('objective').value === 'max' && cell < 0) || 
                         (document.getElementById('objective').value === 'min' && cell > 0))) {
                        cellClass = 'entering';
                    }
                    if (rowIndex === tableauHistory[currentStep].pivotRow && colIndex === tableauHistory[currentStep].pivotCol) {
                        cellClass = 'pivot';
                    }
                    html += `<td class="${cellClass}">${cell.toFixed(2)}</td>`;
                });
                html += '</tr>';
            });

            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function extractSolution(tableau, basis) {
            const numVars = tableau[0].length - 1 - (tableau.length - 1);
            const variables = Array(numVars).fill(0);
            basis.forEach((varIdx, rowIdx) => {
                if (varIdx < numVars) {
                    variables[varIdx] = tableau[rowIdx][tableau[0].length - 1];
                }
            });
            const optimalValue = document.getElementById('objective').value === 'max' 
                ? tableau[tableau.length - 1][tableau[0].length - 1]
                : -tableau[tableau.length - 1][tableau[0].length - 1];
            return { variables, optimalValue };
        }

        function showNextStep() {
            if (currentStep < tableauHistory.length - 1) {
                currentStep++;
                updateUI();
            }
        }

        function showPreviousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        function reset() {
            tableauHistory = [];
            currentStep = 0;
            document.getElementById('tableau-container').innerHTML = '<p class="step-info">è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚</p>';
            document.getElementById('step-description').textContent = 'é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚';
            document.getElementById('step-counter').textContent = '0 / 0';
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('next-btn').disabled = true;
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('solution-variables').innerHTML = `
                <div class="variable">5nmæ™¶ç‰‡ = <span id="x1">0</span> ç‰‡</div>
                <div class="variable">3nmæ™¶ç‰‡ = <span id="x2">0</span> ç‰‡</div>`;
            document.getElementById('optimal-value').textContent = '0';
        }

        function displayError(message) {
            const container = document.getElementById('tableau-container');
            container.innerHTML = `<div class="error-message">${message}</div>`;
            document.getElementById('next-btn').disabled = true;
            document.getElementById('prev-btn').disabled = true;
        }
    </script>
</body>
</html>
