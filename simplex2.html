<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–å·¥å…· - é€²éšç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
            --purple: #9b59b6;
            --orange: #e67e22;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--light);
            padding: 20px;
            min-height: 100vh;
            overflow-x: auto;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, #a8e6cf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: none;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1000px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .panel-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .icon {
            font-size: 1.5rem;
        }
        
        .problem-input {
            display: grid;
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: var(--light);
            font-size: 1rem;
        }
        
        input, select, textarea {
            padding: 14px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            transform: translateY(-2px);
        }
        
        button {
            background: linear-gradient(45deg, var(--secondary), var(--purple));
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background: linear-gradient(45deg, #7f8c8d, #95a5a6);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .controls button {
            flex: 1;
        }
        
        .btn-reset {
            background: linear-gradient(45deg, var(--accent), #c0392b);
        }
        
        .btn-next {
            background: linear-gradient(45deg, var(--success), #27ae60);
        }
        
        .btn-prev {
            background: linear-gradient(45deg, var(--warning), #d68910);
        }
        
        .result-panel {
            grid-column: 1 / -1;
        }
        
        .tableau-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.1);
            padding: 15px;
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        th {
            background: linear-gradient(45deg, var(--dark), var(--primary));
            padding: 16px 12px;
            text-align: center;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
        }
        
        td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        tr:hover td {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
            font-weight: bold;
            position: relative;
            animation: pulse 2s infinite;
        }
        
        .pivot::after {
            content: attr(data-pivot-label);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 6px;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
        
        .basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }
        
        .solution-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .solution-card {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .solution-card h3 {
            margin-bottom: 15px;
            color: var(--light);
            font-size: 1.2rem;
        }
        
        .solution-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--success), #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .variables {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .variable {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
            padding: 10px 18px;
            border-radius: 25px;
            font-weight: 600;
            border: 1px solid rgba(52, 152, 219, 0.5);
        }
        
        .step-info {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        .step-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .case-description {
            background: linear-gradient(145deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));
            border: 2px solid rgba(52, 152, 219, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            line-height: 1.7;
        }
        
        .case-description h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            margin-top: 25px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .case-description h3:first-child {
            margin-top: 0;
        }
        
        .case-description ul {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        .case-description li {
            margin-bottom: 10px;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 20px;
            line-height: 1.8;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .instructions h2 {
            margin-bottom: 20px;
            color: white;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .instructions ul {
            padding-left: 30px;
            margin-top: 15px;
        }
        
        .instructions li {
            margin-bottom: 15px;
        }
        
        .instructions code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            color: var(--warning);
            font-weight: 600;
        }
        
        .highlight {
            color: var(--success);
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
        }
        
        .legend-pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
        }
        
        .legend-basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .legend-entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }

        .error-message {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.2), rgba(192, 57, 43, 0.2));
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 18px;
            margin: 15px 0;
            color: white;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            line-height: 1.6;
        }

        .algorithm-info {
            background: linear-gradient(145deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
            border: 2px solid rgba(155, 89, 182, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            line-height: 1.7;
        }

        .algorithm-info h3 {
            color: var(--purple);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-counter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .counter {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .sensitivity-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 20px;
        }

        .feasible-region {
            margin-top: 20px;
            height: 400px;
        }

        .language-select {
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 data-key="title">ğŸ¯ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–è§£æ±ºæ–¹æ¡ˆ</h1>
            <p class="subtitle" data-key="subtitle">
                æ­¤å·¥å…·æ¡ç”¨å–®å½¢æ³• (Simplex Method) æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œï¼Œä¸¦æä¾›å®Œæ•´çš„è¨ˆç®—éç¨‹å¯è¦–åŒ–ã€‚
                é©ç”¨æ–¼ç”Ÿç”¢è¦åŠƒã€è³‡æºåˆ†é…ã€åˆ©æ½¤æœ€å¤§åŒ–ç­‰å¯¦éš›å•†æ¥­å•é¡Œçš„æ±‚è§£èˆ‡æ•™å­¸ã€‚
            </p>
        </header>
        
        <select id="language" class="language-select">
            <option value="zh">ä¸­æ–‡</option>
            <option value="en">English</option>
        </select>

        <div class="content">
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“Š</span>
                    <span data-key="problem_input">å•é¡Œè¼¸å…¥</span>
                </h2>
                <div class="problem-input">
                    <div class="input-group">
                        <label for="objective" data-key="objective_type">ğŸ¯ ç›®æ¨™å‡½æ•¸é¡å‹</label>
                        <select id="objective">
                            <option value="max" data-key="maximize">æœ€å¤§åŒ– (Maximize)</option>
                            <option value="min" data-key="minimize">æœ€å°åŒ– (Minimize)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="function" data-key="objective_coeffs">ğŸ’° ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ (ç”¨é€—è™Ÿåˆ†éš”ï¼Œä¾‹å¦‚: 800,1200)</label>
                        <input type="text" id="function" value="800,1200" placeholder="ä¾‹å¦‚: 800,1200">
                    </div>
                    
                    <div class="input-group">
                        <label for="constraints" data-key="constraints">âš–ï¸ ç´„æŸæ¢ä»¶ (æ¯è¡Œä¸€å€‹ç´„æŸï¼Œæ ¼å¼: ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸)</label>
                        <textarea id="constraints" rows="6">4,6,<=,2400
2,2,<=,800
1,3,<=,900
1,0,<=,300
0,1,<=,250</textarea>
                    </div>
                    
                    <button id="solve-btn" data-key="solve">ğŸš€ æ±‚è§£å•é¡Œ</button>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ®</span>
                    <span data-key="calculation_control">è¨ˆç®—æ§åˆ¶</span>
                </h2>
                
                <div class="step-counter">
                    <span data-key="current_step">ç•¶å‰æ­¥é©Ÿï¼š</span>
                    <span class="counter" id="step-counter">0 / 0</span>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                
                <div class="controls">
                    <button id="prev-btn" class="btn-prev" disabled data-key="previous">â¬…ï¸ ä¸Šä¸€æ­¥</button>
                    <button id="next-btn" class="btn-next" disabled data-key="next">ä¸‹ä¸€æ­¥ â¡ï¸</button>
                    <button id="reset-btn" class="btn-reset" data-key="reset">ğŸ”„ é‡ç½®</button>
                </div>
                
                <div class="step-info">
                    <h3 class="step-title">
                        <span>ğŸ“</span>
                        <span data-key="step_explanation">æ­¥é©Ÿèªªæ˜</span>
                    </h3>
                    <p id="step-description" data-key="initial_description">é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚</p>
                </div>
                
                <div class="solution-box">
                    <div class="solution-card">
                        <h3 data-key="optimal_solution">ğŸ­ æœ€å„ªè§£ (ç”Ÿç”¢æ•¸é‡)</h3>
                        <div class="variables" id="solution-variables">
                            <div class="variable" data-key="variable_x1">5nmæ™¶ç‰‡ = <span id="x1">0</span> ç‰‡</div>
                            <div class="variable" data-key="variable_x2">3nmæ™¶ç‰‡ = <span id="x2">0</span> ç‰‡</div>
                        </div>
                    </div>
                    
                    <div class="solution-card">
                        <h3 data-key="max_profit">ğŸ’° æœ€å¤§åˆ©æ½¤</h3>
                        <div class="solution-value" id="optimal-value">0</div>
                        <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.8;" data-key="currency">è¬å°å¹£</div>
                    </div>
                </div>

                <canvas id="feasible-region" class="feasible-region"></canvas>

                <div class="sensitivity-panel" id="sensitivity-panel">
                    <h3 data-key="sensitivity_analysis">æ•æ„Ÿæ€§åˆ†æ</h3>
                    <div id="shadow-prices"></div>
                    <div id="range-analysis"></div>
                </div>
            </div>
            
            <div class="panel result-panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“‹</span>
                    <span data-key="tableau_process">å–®å½¢è¡¨è¨ˆç®—éç¨‹</span>
                </h2>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color legend-pivot"></div>
                        <span data-key="pivot_element">æ¨è»¸å…ƒç´  (Pivot Element)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-basis"></div>
                        <span data-key="basic_variables">åŸºè®Šé‡ (Basic Variables)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-entering"></div>
                        <span data-key="entering_variable">é€²å…¥è®Šé‡ (Entering Variable)</span>
                    </div>
                </div>
                
                <div class="tableau-container" id="tableau-container">
                    <p class="step-info" data-key="input_prompt">è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="case-description">
            <h3 data-key="case_title">ğŸ¢ å¯¦éš›æ¡ˆä¾‹ï¼šå°ç©é›»æ™¶ç‰‡ç”Ÿç”¢è¦åŠƒ</h3>
            <p data-key="case_description">
                æœ¬å·¥å…·ä»¥å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ç‚ºä¾‹ï¼Œå±•ç¤ºç·šæ€§è¦åŠƒåœ¨å¯¦éš›è£½é€ æ¥­ä¸­çš„æ‡‰ç”¨ã€‚
                å‡è¨­å°ç©é›»éœ€è¦æ±ºå®š5nmå’Œ3nmæ™¶ç‰‡çš„æœ€å„ªç”Ÿç”¢é…ç½®ï¼Œä»¥æœ€å¤§åŒ–åˆ©æ½¤ã€‚
            </p>
            
            <h3 data-key="problem_setup">ğŸ“Š å•é¡Œè¨­å®š</h3>
            <ul>
                <li data-key="decision_variables"><strong>æ±ºç­–è®Šé‡ï¼š</strong>xâ‚ = 5nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡ï¼Œxâ‚‚ = 3nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡</li>
                <li data-key="objective_function"><strong>ç›®æ¨™å‡½æ•¸ï¼š</strong>æœ€å¤§åŒ–åˆ©æ½¤ = 800xâ‚ + 1200xâ‚‚ (è¬å°å¹£)</li>
                <li data-key="constraints_title"><strong>ç´„æŸæ¢ä»¶ï¼š</strong>
                    <ul>
                        <li data-key="constraint1">è¨­å‚™æ™‚é–“é™åˆ¶ï¼š4xâ‚ + 6xâ‚‚ â‰¤ 2400 (å°æ™‚)</li>
                        <li data-key="constraint2">åŸæ–™é™åˆ¶ï¼š2xâ‚ + 2xâ‚‚ â‰¤ 800 (å–®ä½)</li>
                        <li data-key="constraint3">æŠ€è¡“äººå“¡é™åˆ¶ï¼šxâ‚ + 3xâ‚‚ â‰¤ 900 (äººæ™‚)</li>
                        <li data-key="constraint4">5nmç”¢èƒ½ä¸Šé™ï¼šxâ‚ â‰¤ 300 (ç‰‡)</li>
                        <li data-key="constraint5">3nmç”¢èƒ½ä¸Šé™ï¼šxâ‚‚ â‰¤ 250 (ç‰‡)</li>
                    </ul>
                </li>
            </ul>
            
            <h3 data-key="learning_objectives">ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
            <ul>
                <li data-key="learning1">ç†è§£ç·šæ€§è¦åŠƒå•é¡Œçš„æ¨™æº–å½¢å¼è½‰æ›</li>
                <li data-key="learning2">æŒæ¡å–®å½¢æ³•çš„è¨ˆç®—æ­¥é©Ÿèˆ‡æ¨è»¸é‹ç®—</li>
                <li data-key="learning3">å­¸ç¿’å¦‚ä½•è§£è®€å–®å½¢è¡¨ä¸­çš„æ•¸æ“šæ„ç¾©</li>
                <li data-key="learning4">äº†è§£åŸºè®Šé‡ã€éåŸºè®Šé‡çš„æ¦‚å¿µ</li>
                <li data-key="learning5">æŒæ¡æœ€å„ªæ€§æª¢é©—èˆ‡è§£çš„åˆ¤å®š</li>
            </ul>
        </div>
        
        <div class="algorithm-info">
            <h3 data-key="algorithm_title">ğŸ§® å–®å½¢æ³•ç®—æ³•èªªæ˜</h3>
            <p data-key="algorithm_description">
                å–®å½¢æ³• (Simplex Method) æ˜¯æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œæœ€ç¶“å…¸çš„ç®—æ³•ï¼Œç”± George Dantzig æ–¼1947å¹´æå‡ºã€‚
                è©²ç®—æ³•é€šéç³»çµ±æ€§åœ°ç§»å‹•åˆ°ç›¸é„°çš„åŸºå¯è¡Œè§£ï¼Œé€æ­¥æ”¹å–„ç›®æ¨™å‡½æ•¸å€¼ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å„ªè§£ã€‚
            </p>
            <ul>
                <li data-key="algorithm_step1"><strong>ç¬¬ä¸€æ­¥ï¼š</strong>å°‡å•é¡Œè½‰æ›ç‚ºæ¨™æº–å½¢å¼ï¼Œæ·»åŠ é¬†å¼›è®Šæ•¸</li>
                <li data-key="algorithm_step2"><strong>ç¬¬äºŒæ­¥ï¼š</strong>å»ºç«‹åˆå§‹å–®å½¢è¡¨ï¼Œæ‰¾åˆ°åˆå§‹åŸºå¯è¡Œè§£</li>
                <li data-key="algorithm_step3"><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>æª¢æŸ¥æœ€å„ªæ€§æ¢ä»¶ï¼ˆç›®æ¨™å‡½æ•¸è¡Œä¿‚æ•¸ï¼‰</li>
                <li data-key="algorithm_step4"><strong>ç¬¬å››æ­¥ï¼š</strong>è‹¥æœªé”æœ€å„ªï¼Œé¸æ“‡é€²å…¥è®Šæ•¸å’Œé›¢é–‹è®Šæ•¸</li>
                <li data-key="algorithm_step5"><strong>ç¬¬äº”æ­¥ï¼š</strong>åŸ·è¡Œæ¨è»¸é‹ç®—ï¼Œæ›´æ–°å–®å½¢è¡¨</li>
                <li data-key="algorithm_step6"><strong>é‡è¤‡æ­¥é©Ÿ3-5</strong>ç›´åˆ°é”åˆ°æœ€å„ªè§£</li>
            </ul>
        </div>
        
        <div class="instructions">
            <h2 data-key="instructions_title">ğŸ“– è©³ç´°ä½¿ç”¨èªªæ˜</h2>
            <ul>
                <li data-key="instruction1"><span class="highlight">ç›®æ¨™å‡½æ•¸è¨­å®š</span>ï¼šè¼¸å…¥ç›®æ¨™å‡½æ•¸çš„ä¿‚æ•¸ï¼Œç”¨é€—è™Ÿåˆ†éš”ã€‚ä¾‹å¦‚æœ€å¤§åŒ–åˆ©æ½¤ z = 800xâ‚ + 1200xâ‚‚ æ‡‰è¼¸å…¥ <code>800,1200</code></li>
                <li data-key="instruction2"><span class="highlight">ç´„æŸæ¢ä»¶æ ¼å¼</span>ï¼šæ¯è¡Œè¼¸å…¥ä¸€å€‹ç´„æŸæ¢ä»¶ï¼Œæ ¼å¼ç‚º <code>ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸</code>ã€‚ä¾‹å¦‚ 4xâ‚ + 6xâ‚‚ â‰¤ 2400 æ‡‰è¼¸å…¥ <code>4,6,<=,2400</code></li>
                <li data-key="instruction3"><span class="highlight">æ”¯æŒé‹ç®—ç¬¦</span>ï¼š<code>&lt;=</code> (å°æ–¼ç­‰æ–¼), <code>=</code> (ç­‰æ–¼), <code>&gt;=</code> (å¤§æ–¼ç­‰æ–¼)</li>
                <li data-key="instruction4"><span class="highlight">æ±‚è§£éç¨‹</span>ï¼šé»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•è¨ˆç®—ä¸¦é¡¯ç¤ºåˆå§‹å–®å½¢è¡¨</li>
                <li data-key="instruction5"><span class="highlight">é€æ­¥æ¼”ç¤º</span>ï¼šä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥è¨ˆç®—éç¨‹</li>
                <li data-key="instruction6"><span class="highlight">è¦–è¦ºåŒ–å…ƒç´ </span>ï¼šè¡¨æ ¼ä¸­ä¸åŒé¡è‰²æ¨™ç¤ºä¸åŒé¡å‹çš„è®Šæ•¸å’Œæ“ä½œ</li>
                <li data-key="instruction7"><span class="highlight">é€²åº¦è¿½è¹¤</span>ï¼šé ‚éƒ¨é€²åº¦æ¢é¡¯ç¤ºç•¶å‰æ±‚è§£é€²åº¦</li>
            </ul>
        </div>
        
        <footer>
            <p><strong data-key="footer_title">ğŸ“ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–æ•™å­¸å·¥å…·</strong></p>
            <p data-key="footer_description">
                æœ¬å·¥å…·å°ˆç‚ºç·šæ€§è¦åŠƒæ•™å­¸è¨­è¨ˆï¼Œå¹«åŠ©å­¸ç”Ÿç†è§£å–®å½¢æ³•çš„è¨ˆç®—åŸç†å’Œå¯¦éš›æ‡‰ç”¨ã€‚
                é©ç”¨æ–¼é‹ç±Œå­¸ã€ç®¡ç†ç§‘å­¸ã€å·¥æ¥­å·¥ç¨‹ç­‰ç›¸é—œèª²ç¨‹çš„æ•™å­¸èˆ‡è‡ªå­¸ã€‚
            </p>
            <p style="margin-top: 15px;">
                <em data-key="footer_tip">ğŸ’¡ æç¤ºï¼šå»ºè­°é…åˆæ•™ç§‘æ›¸å…§å®¹ä½¿ç”¨ï¼Œæ·±å…¥ç†è§£</em>
            </p>
        </footer>
    </div>

    <script>
        // å¤šèªè¨€æ”¯æ´
        const translations = {
            zh: {
                title: 'ğŸ¯ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–è§£æ±ºæ–¹æ¡ˆ',
                subtitle: 'æ­¤å·¥å…·æ¡ç”¨å–®å½¢æ³• (Simplex Method) æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œï¼Œä¸¦æä¾›å®Œæ•´çš„è¨ˆç®—éç¨‹å¯è¦–åŒ–ã€‚é©ç”¨æ–¼ç”Ÿç”¢è¦åŠƒã€è³‡æºåˆ†é…ã€åˆ©æ½¤æœ€å¤§åŒ–ç­‰å¯¦éš›å•†æ¥­å•é¡Œçš„æ±‚è§£èˆ‡æ•™å­¸ã€‚',
                problem_input: 'å•é¡Œè¼¸å…¥',
                objective_type: 'ğŸ¯ ç›®æ¨™å‡½æ•¸é¡å‹',
                maximize: 'æœ€å¤§åŒ– (Maximize)',
                minimize: 'æœ€å°åŒ– (Minimize)',
                objective_coeffs: 'ğŸ’° ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ (ç”¨é€—è™Ÿåˆ†éš”ï¼Œä¾‹å¦‚: 800,1200)',
                constraints: 'âš–ï¸ ç´„æŸæ¢ä»¶ (æ¯è¡Œä¸€å€‹ç´„æŸï¼Œæ ¼å¼: ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸)',
                solve: 'ğŸš€ æ±‚è§£å•é¡Œ',
                calculation_control: 'è¨ˆç®—æ§åˆ¶',
                current_step: 'ç•¶å‰æ­¥é©Ÿï¼š',
                previous: 'â¬…ï¸ ä¸Šä¸€æ­¥',
                next: 'ä¸‹ä¸€æ­¥ â¡ï¸',
                reset: 'ğŸ”„ é‡ç½®',
                step_explanation: 'æ­¥é©Ÿèªªæ˜',
                initial_description: 'é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚',
                optimal_solution: 'ğŸ­ æœ€å„ªè§£ (ç”Ÿç”¢æ•¸é‡)',
                max_profit: 'ğŸ’° æœ€å¤§åˆ©æ½¤',
                currency: 'è¬å°å¹£',
                variable_x1: '5nmæ™¶ç‰‡ = <span id="x1">0</span> ç‰‡',
                variable_x2: '3nmæ™¶ç‰‡ = <span id="x2">0</span> ç‰‡',
                tableau_process: 'å–®å½¢è¡¨è¨ˆç®—éç¨‹',
                pivot_element: 'æ¨è»¸å…ƒç´  (Pivot Element)',
                basic_variables: 'åŸºè®Šé‡ (Basic Variables)',
                entering_variable: 'é€²å…¥è®Šé‡ (Entering Variable)',
                input_prompt: 'è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚',
                sensitivity_analysis: 'æ•æ„Ÿæ€§åˆ†æ',
                shadow_prices: 'å½±åƒ¹',
                range_analysis: 'ç¯„åœåˆ†æ',
                case_title: 'ğŸ¢ å¯¦éš›æ¡ˆä¾‹ï¼šå°ç©é›»æ™¶ç‰‡ç”Ÿç”¢è¦åŠƒ',
                case_description: 'æœ¬å·¥å…·ä»¥å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ç‚ºä¾‹ï¼Œå±•ç¤ºç·šæ€§è¦åŠƒåœ¨å¯¦éš›è£½é€ æ¥­ä¸­çš„æ‡‰ç”¨ã€‚å‡è¨­å°ç©é›»éœ€è¦æ±ºå®š5nmå’Œ3nmæ™¶ç‰‡çš„æœ€å„ªç”Ÿç”¢é…ç½®ï¼Œä»¥æœ€å¤§åŒ–åˆ©æ½¤ã€‚',
                problem_setup: 'ğŸ“Š å•é¡Œè¨­å®š',
                decision_variables: '<strong>æ±ºç­–è®Šé‡ï¼š</strong>xâ‚ = 5nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡ï¼Œxâ‚‚ = 3nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡',
                objective_function: '<strong>ç›®æ¨™å‡½æ•¸ï¼š</strong>æœ€å¤§åŒ–åˆ©æ½¤ = 800xâ‚ + 1200xâ‚‚ (è¬å°å¹£)',
                constraints_title: '<strong>ç´„æŸæ¢ä»¶ï¼š</strong>',
                constraint1: 'è¨­å‚™æ™‚é–“é™åˆ¶ï¼š4xâ‚ + 6xâ‚‚ â‰¤ 2400 (å°æ™‚)',
                constraint2: 'åŸæ–™é™åˆ¶ï¼š2xâ‚ + 2xâ‚‚ â‰¤ 800 (å–®ä½)',
                constraint3: 'æŠ€è¡“äººå“¡é™åˆ¶ï¼šxâ‚ + 3xâ‚‚ â‰¤ 900 (äººæ™‚)',
                constraint4: '5nmç”¢èƒ½ä¸Šé™ï¼šxâ‚ â‰¤ 300 (ç‰‡)',
                constraint5: '3nmç”¢èƒ½ä¸Šé™ï¼šxâ‚‚ â‰¤ 250 (ç‰‡)',
                learning_objectives: 'ğŸ¯ å­¸ç¿’ç›®æ¨™',
                learning1: 'ç†è§£ç·šæ€§è¦åŠƒå•é¡Œçš„æ¨™æº–å½¢å¼è½‰æ›',
                learning2: 'æŒæ¡å–®å½¢æ³•çš„è¨ˆç®—æ­¥é©Ÿèˆ‡æ¨è»¸é‹ç®—',
                learning3: 'å­¸ç¿’å¦‚ä½•è§£è®€å–®å½¢è¡¨ä¸­çš„æ•¸æ“šæ„ç¾©',
                learning4: 'äº†è§£åŸºè®Šé‡ã€éåŸºè®Šé‡çš„æ¦‚å¿µ',
                learning5: 'æŒæ¡æœ€å„ªæ€§æª¢é©—èˆ‡è§£çš„åˆ¤å®š',
                algorithm_title: 'ğŸ§® å–®å½¢æ³•ç®—æ³•èªªæ˜',
                algorithm_description: 'å–®å½¢æ³• (Simplex Method) æ˜¯æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œæœ€ç¶“å…¸çš„ç®—æ³•ï¼Œç”± George Dantzig æ–¼1947å¹´æå‡ºã€‚è©²ç®—æ³•é€šéç³»çµ±æ€§åœ°ç§»å‹•åˆ°ç›¸é„°çš„åŸºå¯è¡Œè§£ï¼Œé€æ­¥æ”¹å–„ç›®æ¨™å‡½æ•¸å€¼ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å„ªè§£ã€‚',
                algorithm_step1: '<strong>ç¬¬ä¸€æ­¥ï¼š</strong>å°‡å•é¡Œè½‰æ›ç‚ºæ¨™æº–å½¢å¼ï¼Œæ·»åŠ é¬†å¼›è®Šæ•¸',
                algorithm_step2: '<strong>ç¬¬äºŒæ­¥ï¼š</strong>å»ºç«‹åˆå§‹å–®å½¢è¡¨ï¼Œæ‰¾åˆ°åˆå§‹åŸºå¯è¡Œè§£',
                algorithm_step3: '<strong>ç¬¬ä¸‰æ­¥ï¼š</strong>æª¢æŸ¥æœ€å„ªæ€§æ¢ä»¶ï¼ˆç›®æ¨™å‡½æ•¸è¡Œä¿‚æ•¸ï¼‰',
                algorithm_step4: '<strong>ç¬¬å››æ­¥ï¼š</strong>è‹¥æœªé”æœ€å„ªï¼Œé¸æ“‡é€²å…¥è®Šæ•¸å’Œé›¢é–‹è®Šæ•¸',
                algorithm_step5: '<strong>ç¬¬äº”æ­¥ï¼š</strong>åŸ·è¡Œæ¨è»¸é‹ç®—ï¼Œæ›´æ–°å–®å½¢è¡¨',
                algorithm_step6: '<strong>é‡è¤‡æ­¥é©Ÿ3-5</strong>ç›´åˆ°é”åˆ°æœ€å„ªè§£',
                instructions_title: 'ğŸ“– è©³ç´°ä½¿ç”¨èªªæ˜',
                instruction1: '<span class="highlight">ç›®æ¨™å‡½æ•¸è¨­å®š</span>ï¼šè¼¸å…¥ç›®æ¨™å‡½æ•¸çš„ä¿‚æ•¸ï¼Œç”¨é€—è™Ÿåˆ†éš”ã€‚ä¾‹å¦‚æœ€å¤§åŒ–åˆ©æ½¤ z = 800xâ‚ + 1200xâ‚‚ æ‡‰è¼¸å…¥ <code>800,1200</code>',
                instruction2: '<span class="highlight">ç´„æŸæ¢ä»¶æ ¼å¼</span>ï¼šæ¯è¡Œè¼¸å…¥ä¸€å€‹ç´„æŸæ¢ä»¶ï¼Œæ ¼å¼ç‚º <code>ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸</code>ã€‚ä¾‹å¦‚ 4xâ‚ + 6xâ‚‚ â‰¤ 2400 æ‡‰è¼¸å…¥ <code>4,6,<=,2400</code>',
                instruction3: '<span class="highlight">æ”¯æŒé‹ç®—ç¬¦</span>ï¼š<code>&lt;=</code> (å°æ–¼ç­‰æ–¼), <code>=</code> (ç­‰æ–¼), <code>&gt;=</code> (å¤§æ–¼ç­‰æ–¼)',
                instruction4: '<span class="highlight">æ±‚è§£éç¨‹</span>ï¼šé»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•è¨ˆç®—ä¸¦é¡¯ç¤ºåˆå§‹å–®å½¢è¡¨',
                instruction5: '<span class="highlight">é€æ­¥æ¼”ç¤º</span>ï¼šä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥è¨ˆç®—éç¨‹',
                instruction6: '<span class="highlight">è¦–è¦ºåŒ–å…ƒç´ </span>ï¼šè¡¨æ ¼ä¸­ä¸åŒé¡è‰²æ¨™ç¤ºä¸åŒé¡å‹çš„è®Šæ•¸å’Œæ“ä½œ',
                instruction7: '<span class="highlight">é€²åº¦è¿½è¹¤</span>ï¼šé ‚éƒ¨é€²åº¦æ¢é¡¯ç¤ºç•¶å‰æ±‚è§£é€²åº¦',
                footer_title: 'ğŸ“ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–æ•™å­¸å·¥å…·',
                footer_description: 'æœ¬å·¥å…·å°ˆç‚ºç·šæ€§è¦åŠƒæ•™å­¸è¨­è¨ˆï¼Œå¹«åŠ©å­¸ç”Ÿç†è§£å–®å½¢æ³•çš„è¨ˆç®—åŸç†å’Œå¯¦éš›æ‡‰ç”¨ã€‚é©ç”¨æ–¼é‹ç±Œå­¸ã€ç®¡ç†ç§‘å­¸ã€å·¥æ¥­å·¥ç¨‹ç­‰ç›¸é—œèª²ç¨‹çš„æ•™å­¸èˆ‡è‡ªå­¸ã€‚',
                footer_tip: 'ğŸ’¡ æç¤ºï¼šå»ºè­°é…åˆæ•™ç§‘æ›¸å…§å®¹ä½¿ç”¨ï¼Œæ·±å…¥ç†è§£',
                error: 'éŒ¯èª¤',
                invalid_objective: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ï¼ˆä¾‹å¦‚ï¼š800,1200ï¼‰ã€‚',
                invalid_constraints: 'è«‹è¼¸å…¥è‡³å°‘ä¸€å€‹æœ‰æ•ˆçš„ç´„æŸæ¢ä»¶ï¼ˆæ ¼å¼ï¼šä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸ï¼‰ã€‚',
                initial_tableau: 'åˆå§‹å–®å½¢è¡¨å·²å»ºç«‹ï¼Œæº–å‚™é€²è¡Œæœ€å„ªæ€§æª¢æŸ¥ã€‚',
                feasible_region: 'å¯è¡Œå€åŸŸ',
                optimal_solution_label: 'æœ€å„ªè§£',
                shadow_prices: 'å½±åƒ¹',
                range_analysis: 'ç¯„åœåˆ†æ',
                infeasible: 'å•é¡Œç„¡å¯è¡Œè§£ã€‚',
                unbounded: 'å•é¡Œç„¡ç•Œï¼Œç„¡æ³•æ‰¾åˆ°æœ‰é™çš„æœ€å„ªè§£ã€‚',
                too_many_iterations: 'è¿­ä»£æ¬¡æ•¸éå¤šï¼Œå¯èƒ½å­˜åœ¨é€€åŒ–æˆ–ç„¡è§£å•é¡Œã€‚',
                iteration_description: 'è¿­ä»£ {iteration}ï¼šé¸æ“‡é€²å…¥è®Šé‡ {entering}ï¼Œé›¢é–‹è®Šé‡ {leaving}ï¼Œæ¨è»¸å…ƒç´ ä½æ–¼ç¬¬ {row} è¡Œï¼Œç¬¬ {col} åˆ—ã€‚',
                optimal_reached: 'å·²é”åˆ°æœ€å„ªè§£ï¼Œè¨ˆç®—å®Œæˆã€‚'
            },
            en: {
                title: 'ğŸ¯ Linear Programming Simplex Method Visualization Tool',
                subtitle: 'This tool uses the Simplex Method to solve linear programming problems and provides a complete visualization of the calculation process. Suitable for solving and teaching real business problems such as production planning, resource allocation, and profit maximization.',
                problem_input: 'Problem Input',
                objective_type: 'ğŸ¯ Objective Function Type',
                maximize: 'Maximize',
                minimize: 'Minimize',
                objective_coeffs: 'ğŸ’° Objective Function Coefficients (comma-separated, e.g.: 800,1200)',
                constraints: 'âš–ï¸ Constraints (one per line, format: coeff1,coeff2,operator,constant)',
                solve: 'ğŸš€ Solve Problem',
                calculation_control: 'Calculation Control',
                current_step: 'Current Step:',
                previous: 'â¬…ï¸ Previous Step',
                next: 'Next Step â¡ï¸',
                reset: 'ğŸ”„ Reset',
                step_explanation: 'Step Explanation',
                initial_description: 'Click the "Solve" button to start calculation. After solving, use the "Next Step" button to view each step of the Simplex Method.',
                optimal_solution: 'ğŸ­ Optimal Solution (Production Quantity)',
                max_profit: 'ğŸ’° Maximum Profit',
                currency: 'Million TWD',
                variable_x1: '5nm Chips = <span id="x1">0</span> units',
                variable_x2: '3nm Chips = <span id="x2">0</span> units',
                tableau_process: 'Tableau Calculation Process',
                pivot_element: 'Pivot Element',
                basic_variables: 'Basic Variables',
                entering_variable: 'Entering Variable',
                input_prompt: 'Enter the problem and click the "Solve" button to display the calculation process here.',
                sensitivity_analysis: 'Sensitivity Analysis',
                shadow_prices: 'Shadow Prices',
                range_analysis: 'Range Analysis',
                case_title: 'ğŸ¢ Case Study: TSMC Chip Production Planning',
                case_description: 'This tool uses TSMC chip production as an example to demonstrate the application of linear programming in real-world manufacturing. Assume TSMC needs to determine the optimal production configuration for 5nm and 3nm chips to maximize profit.',
                problem_setup: 'ğŸ“Š Problem Setup',
                decision_variables: '<strong>Decision Variables:</strong> xâ‚ = 5nm chip production quantity, xâ‚‚ = 3nm chip production quantity',
                objective_function: '<strong>Objective Function:</strong> Maximize profit = 800xâ‚ + 1200xâ‚‚ (Million TWD)',
                constraints_title: '<strong>Constraints:</strong>',
                constraint1: 'Equipment time constraint: 4xâ‚ + 6xâ‚‚ â‰¤ 2400 (hours)',
                constraint2: 'Material constraint: 2xâ‚ + 2xâ‚‚ â‰¤ 800 (units)',
                constraint3: 'Technician constraint: xâ‚ + 3xâ‚‚ â‰¤ 900 (man-hours)',
                constraint4: '5nm capacity limit: xâ‚ â‰¤ 300 (units)',
                constraint5: '3nm capacity limit: xâ‚‚ â‰¤ 250 (units)',
                learning_objectives: 'ğŸ¯ Learning Objectives',
                learning1: 'Understand the conversion of linear programming problems to standard form',
                learning2: 'Master the computational steps and pivot operations of the Simplex Method',
                learning3: 'Learn to interpret the data in the simplex tableau',
                learning4: 'Understand the concepts of basic and non-basic variables',
                learning5: 'Master optimality testing and solution determination',
                algorithm_title: 'ğŸ§® Simplex Method Algorithm Explanation',
                algorithm_description: 'The Simplex Method is a classic algorithm for solving linear programming problems, proposed by George Dantzig in 1947. It systematically moves to adjacent basic feasible solutions, improving the objective function value until the optimal solution is found.',
                algorithm_step1: '<strong>Step 1:</strong> Convert the problem to standard form, adding slack variables',
                algorithm_step2: '<strong>Step 2:</strong> Construct the initial simplex tableau and find the initial basic feasible solution',
                algorithm_step3: '<strong>Step 3:</strong> Check optimality conditions (objective function row coefficients)',
                algorithm_step4: '<strong>Step 4:</strong> If not optimal, select entering and leaving variables',
                algorithm_step5: '<strong>Step 5:</strong> Perform pivot operations to update the tableau',
                algorithm_step6: '<strong>Repeat Steps 3-5</strong> until the optimal solution is reached',
                instructions_title: 'ğŸ“– Detailed Usage Instructions',
                instruction1: '<span class="highlight">Objective Function Setup</span>: Enter the coefficients of the objective function, separated by commas. For example, to maximize profit z = 800xâ‚ + 1200xâ‚‚, enter <code>800,1200</code>',
                instruction2: '<span class="highlight">Constraint Format</span>: Enter one constraint per line in the format <code>coeff1,coeff2,operator,constant</code>. For example, 4xâ‚ + 6xâ‚‚ â‰¤ 2400 should be entered as <code>4,6,<=,2400</code>',
                instruction3: '<span class="highlight">Supported Operators</span>: <code>&lt;=</code> (less than or equal), <code>=</code> (equal), <code>&gt;=</code> (greater than or equal)',
                instruction4: '<span class="highlight">Solution Process</span>: Click the "Solve" button to automatically calculate and display the initial simplex tableau',
                instruction5: '<span class="highlight">Step-by-Step Demonstration</span>: Use the "Next Step" button to view each step of the Simplex Method',
                instruction6: '<span class="highlight">Visualization Elements</span>: Different colors in the tableau indicate different types of variables and operations',
                instruction7: '<span class="highlight">Progress Tracking</span>: The top progress bar shows the current solving progress',
                footer_title: 'ğŸ“ Linear Programming Simplex Method Visualization Tool',
                footer_description: 'This tool is designed for linear programming education, helping students understand the computational principles and practical applications of the Simplex Method. Suitable for courses in operations research, management science, and industrial engineering.',
                footer_tip: 'ğŸ’¡ Tip: Use with textbook content for a deeper understanding',
                error: 'Error',
                invalid_objective: 'Please enter valid objective function coefficients (e.g., 800,1200).',
                invalid_constraints: 'Please enter at least one valid constraint (format: coeff1,coeff2,operator,constant).',
                initial_tableau: 'Initial simplex tableau constructed, ready for optimality check.',
                feasible_region: 'Feasible Region',
                optimal_solution_label: 'Optimal Solution',
                shadow_prices: 'Shadow Prices',
                range_analysis: 'Range Analysis',
                infeasible: 'The problem is infeasible.',
                unbounded: 'The problem is unbounded, no finite optimal solution exists.',
                too_many_iterations: 'Too many iterations, possible degeneracy or no solution.',
                iteration_description: 'Iteration {iteration}: Selected entering variable {entering}, leaving variable {leaving}, pivot element at row {row}, column {col}.',
                optimal_reached: 'Optimal solution reached, calculation completed.'
            }
        };

        let currentLanguage = 'zh';
        let tableauHistory = [];
        let currentStep = 0;
        let basisVariables = [];
        let constraintsData = [];
        let objectiveCoefficients = [];
        let chart = null;
        const BIG_M = 1000000;

        // åˆå§‹åŒ–èªè¨€
        function updateLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[lang][key]) {
                    if (el.tagName === 'OPTION') {
                        el.textContent = translations[lang][key];
                    } else if (el.id === 'step-description') {
                        // ä¿æŒå‹•æ…‹æ­¥é©Ÿæè¿°
                    } else {
                        el.innerHTML = translations[lang][key];
                    }
                }
            });
            // æ›´æ–°æ¨è»¸å…ƒç´ çš„æ¨™ç±¤
            document.querySelectorAll('.pivot').forEach(el => {
                el.setAttribute('data-pivot-label', translations[lang].pivot_element || 'ğŸ¯ Pivot');
            });
            // é‡æ–°æ¸²æŸ“è¡¨æ ¼å’Œåœ–è¡¨ä»¥æ›´æ–°èªè¨€
            if (tableauHistory.length > 0) {
                updateUI();
            }
        }

        // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
        function displayError(message) {
            const container = document.getElementById('tableau-container');
            container.innerHTML = `<div class="error-message">${message}</div>`;
            document.getElementById('solution-variables').innerHTML = '<div class="variable">' + 
                (translations[currentLanguage].not_optimal || 'å°šæœªé”åˆ°æœ€å„ªè§£') + '</div>';
            document.getElementById('optimal-value').textContent = '0';
            document.getElementById('shadow-prices').innerHTML = '';
            document.getElementById('range-analysis').innerHTML = '';
            if (chart) {
                chart.destroy();
                chart = null;
            }
        }

        // ç¶å®šæŒ‰éˆ•äº‹ä»¶
        document.getElementById('solve-btn').addEventListener('click', solveProblem);
        document.getElementById('next-btn').addEventListener('click', showNextStep);
        document.getElementById('prev-btn').addEventListener('click', showPreviousStep);
        document.getElementById('reset-btn').addEventListener('click', reset);

        function solveProblem() {
            // é‡ç½®ç‹€æ…‹
            tableauHistory = [];
            currentStep = 0;
            basisVariables = [];
            if (chart) {
                chart.destroy();
                chart = null;
            }

            // è§£æè¼¸å…¥
            const objectiveType = document.getElementById('objective').value;
            const objectiveInput = document.getElementById('function').value;
            const constraintsInput = document.getElementById('constraints').value;

            // é©—è­‰ç›®æ¨™å‡½æ•¸
            objectiveCoefficients = objectiveInput.split(',')
                .map(x => parseFloat(x.trim()))
                .filter(x => !isNaN(x));
            if (objectiveCoefficients.length < 1) {
                displayError(translations[currentLanguage].invalid_objective);
                return;
            }

            // è§£æç´„æŸæ¢ä»¶
            constraintsData = constraintsInput.split('\n')
                .map(line => line.trim())
                .filter(line => line !== '')
                .map(line => {
                    const parts = line.split(',');
                    if (parts.length < 3) return null;
                    const coefficients = parts.slice(0, -2)
                        .map(x => parseFloat(x.trim()))
                        .filter(x => !isNaN(x));
                    const operator = parts[parts.length - 2].trim();
                    const rhs = parseFloat(parts[parts.length - 1]);
                    if (coefficients.length !== objectiveCoefficients.length || !['<=', '=', '>='].includes(operator) || isNaN(rhs) || rhs < 0) {
                        return null;
                    }
                    return { coefficients, operator, rhs };
                })
                .filter(c => c !== null);

            if (constraintsData.length === 0) {
                displayError(translations[currentLanguage].invalid_constraints);
                return;
            }

            // åˆå§‹åŒ–å–®å½¢è¡¨
            try {
                const tableau = initializeTableauBigM(objectiveCoefficients, constraintsData, objectiveType);
                tableauHistory.push({
                    tableau: JSON.parse(JSON.stringify(tableau.tableau)),
                    basis: [...tableau.basis],
                    description: translations[currentLanguage].initial_tableau,
                    pivotRow: -1,
                    pivotCol: -1
                });

                // åŸ·è¡Œå–®å½¢æ³•
                runSimplex(tableau, objectiveType);

                // é¡¯ç¤ºç¬¬ä¸€æ­¥
                currentStep = 0;
                updateUI();
                document.getElementById('next-btn').disabled = tableauHistory.length <= 1;
                document.getElementById('prev-btn').disabled = true;
            } catch (e) {
                displayError(`${translations[currentLanguage].error}ï¼š${e.message}`);
            }
        }

        function initializeTableauBigM(objective, constraints, type) {
            const numVars = objective.length;
            const numConstraints = constraints.length;
            let numArtificial = 0;
            constraints.forEach(c => {
                if (c.operator === '>=' || c.operator === '=') numArtificial++;
            });
            const numSlack = constraints.filter(c => c.operator === '<=' || c.operator === '>=').length;
            const tableau = [];
            const basis = [];
            let artificialIndex = numVars + numSlack;

            // æ·»åŠ ç´„æŸæ¢ä»¶è¡Œ
            constraints.forEach((constraint, i) => {
                const row = new Array(numVars + numSlack + numArtificial + 1).fill(0);
                constraint.coefficients.forEach((coeff, j) => {
                    row[j] = coeff;
                });
                if (constraint.operator === '<=') {
                    row[numVars + i] = 1; // é¬†å¼›è®Šé‡
                    basis.push(numVars + i);
                } else if (constraint.operator === '>=') {
                    row[numVars + i] = -1; // å‰©é¤˜è®Šé‡
                    row[artificialIndex] = 1; // äººå·¥è®Šé‡
                    basis.push(artificialIndex);
                    artificialIndex++;
                } else if (constraint.operator === '=') {
                    row[artificialIndex] = 1; // äººå·¥è®Šé‡
                    basis.push(artificialIndex);
                    artificialIndex++;
                }
                row[row.length - 1] = constraint.rhs;
                tableau.push(row);
            });

            // æ·»åŠ ç›®æ¨™å‡½æ•¸è¡Œ
            const objRow = new Array(numVars + numSlack + numArtificial + 1).fill(0);
            objective.forEach((coeff, i) => {
                objRow[i] = type === 'max' ? -coeff : coeff;
            });
            for (let i = 0; i < numArtificial; i++) {
                objRow[numVars + numSlack + i] = type === 'max' ? -BIG_M : BIG_M;
            }
            // Big M æ–¹æ³•ï¼šå°‡äººå·¥è®Šé‡çš„ä¿‚æ•¸åŠ åˆ°ç›®æ¨™å‡½æ•¸è¡Œ
            for (let i = 0; i < numConstraints; i++) {
                if (constraints[i].operator === '>=' || constraints[i].operator === '=') {
                    const artificialIdx = numVars + numSlack + basis[i] - numVars - numSlack;
                    for (let j = 0; j < tableau[0].length; j++) {
                        objRow[j] -= (type === 'max' ? BIG_M : -BIG_M) * tableau[i][j];
                    }
                }
            }
            tableau.push(objRow);

            return { tableau, basis };
        }

        function runSimplex(tableauObj, objectiveType) {
            let { tableau, basis } = tableauObj;
            let iteration = 0;
            const maxIterations = 100;

            while (iteration < maxIterations) {
                const objRow = tableau[tableau.length - 1];
                const pivotCol = objectiveType === 'max'
                    ? objRow.slice(0, -1).reduce((minIdx, val, idx) => val < objRow[minIdx] ? idx : minIdx, 0)
                    : objRow.slice(0, -1).reduce((maxIdx, val, idx) => val > objRow[maxIdx] ? idx : maxIdx, 0);

                if ((objectiveType === 'max' && objRow[pivotCol] >= -1e-10) || 
                    (objectiveType === 'min' && objRow[pivotCol] <= 1e-10)) {
                    // æª¢æŸ¥äººå·¥è®Šé‡æ˜¯å¦ç‚ºé›¶
                    const numVars = objectiveCoefficients.length;
                    const numSlack = constraintsData.filter(c => c.operator === '<=' || c.operator === '>=').length;
                    const artificialStart = numVars + numSlack;
                    for (let i = 0; i < tableau.length - 1; i++) {
                        if (basis[i] >= artificialStart && Math.abs(tableau[i][tableau[0].length - 1]) > 1e-10) {
                            throw new Error(translations[currentLanguage].infeasible);
                        }
                    }
                    tableauHistory.push({
                        tableau: JSON.parse(JSON.stringify(tableau)),
                        basis: [...basis],
                        description: translations[currentLanguage].optimal_reached,
                        pivotRow: -1,
                        pivotCol: -1
                    });
                    break;
                }

                // æœ€å°æ¯”ç‡æ¸¬è©¦
                let minRatio = Infinity;
                let pivotRow = -1;
                for (let i = 0; i < tableau.length - 1; i++) {
                    if (tableau[i][pivotCol] > 1e-10) {
                        const ratio = tableau[i][tableau[0].length - 1] / tableau[i][pivotCol];
                        if (ratio < minRatio && ratio >= -1e-10) {
                            minRatio = ratio;
                            pivotRow = i;
                        }
                    }
                }

                if (pivotRow === -1) {
                    throw new Error(translations[currentLanguage].unbounded);
                }

                // åŸ·è¡Œæ¨è»¸é‹ç®—
                const pivotValue = tableau[pivotRow][pivotCol];
                for (let j = 0; j < tableau[0].length; j++) {
                    tableau[pivotRow][j] /= pivotValue;
                }

                for (let i = 0; i < tableau.length; i++) {
                    if (i !== pivotRow) {
                        const factor = tableau[i][pivotCol];
                        for (let j = 0; j < tableau[0].length; j++) {
                            tableau[i][j] -= factor * tableau[pivotRow][j];
                        }
                    }
                }

                // æ›´æ–°åŸºè®Šé‡
                basis[pivotRow] = pivotCol;

                // è¨˜éŒ„æ­¥é©Ÿ
                tableauHistory.push({
                    tableau: JSON.parse(JSON.stringify(tableau)),
                    basis: [...basis],
                    description: translations[currentLanguage].iteration_description
                        .replace('{iteration}', iteration + 1)
                        .replace('{entering}', `x${pivotCol + 1}`)
                        .replace('{leaving}', `x${basis[pivotRow] + 1}`)
                        .replace('{row}', pivotRow + 1)
                        .replace('{col}', pivotCol + 1),
                    pivotRow,
                    pivotCol
                });

                iteration++;
            }

            if (iteration >= maxIterations) {
                throw new Error(translations[currentLanguage].too_many_iterations);
            }
        }

        function showNextStep() {
            if (currentStep < tableauHistory.length - 1) {
                currentStep++;
                updateUI();
            }
        }

        function showPreviousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        function reset() {
            tableauHistory = [];
            currentStep = 0;
            basisVariables = [];
            document.getElementById('tableau-container').innerHTML = `<p class="step-info">${translations[currentLanguage].input_prompt}</p>`;
            document.getElementById('step-description').textContent = translations[currentLanguage].initial_description;
            document.getElementById('step-counter').textContent = '0 / 0';
            document.getElementById('progress-fill').style.width = '0%';
            document.getElementById('next-btn').disabled = true;
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('solution-variables').innerHTML = `
                <div class="variable">${translations[currentLanguage].variable_x1}</div>
                <div class="variable">${translations[currentLanguage].variable_x2}</div>
            `;
            document.getElementById('optimal-value').textContent = '0';
            document.getElementById('shadow-prices').innerHTML = '';
            document.getElementById('range-analysis').innerHTML = '';
            if (chart) {
                chart.destroy();
                chart = null;
            }
        }

        function updateUI() {
            const step = tableauHistory[currentStep];
            if (!step) return;

            // æ›´æ–°å–®å½¢è¡¨
            renderTableau(step.tableau, step.basis, step.pivotRow, step.pivotCol);

            // æ›´æ–°æ­¥é©Ÿèªªæ˜
            document.getElementById('step-description').textContent = step.description;

            // æ›´æ–°æ­¥é©Ÿè¨ˆæ•¸å™¨å’Œé€²åº¦æ¢
            document.getElementById('step-counter').textContent = `${currentStep + 1} / ${tableauHistory.length}`;
            const progress = tableauHistory.length > 1 ? (currentStep / (tableauHistory.length - 1)) * 100 : 0;
            document.getElementById('progress-fill').style.width = `${progress}%`;

            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.getElementById('next-btn').disabled = currentStep >= tableauHistory.length - 1;
            document.getElementById('prev-btn').disabled = currentStep <= 0;

            // æ›´æ–°è§£æ±ºæ–¹æ¡ˆ
            if (currentStep === tableauHistory.length - 1) {
                const solution = extractSolution(step.tableau, step.basis);
                document.getElementById('solution-variables').innerHTML = solution.variables
                    .map((val, i) => `<div class="variable">x${i + 1} = <span id="x${i + 1}">${val.toFixed(2)}</span> ${translations[currentLanguage][`variable_x${i + 1}`].split('=')[1].trim()}</div>`)
                    .join('');
                document.getElementById('optimal-value').textContent = solution.optimalValue.toFixed(2);

                // ç¹ªè£½å¯è¡Œå€åŸŸ
                if (objectiveCoefficients.length === 2) {
//                    drawFeasibleRegion(solution.variables[0], solution.variables[1]);
                }

                // æ•æ„Ÿæ€§åˆ†æ
                performSensitivityAnalysis(step.tableau, step.basis);
            } else {
                document.getElementById('solution-variables').innerHTML = '<div class="variable">' + 
                    (translations[currentLanguage].not_optimal || 'å°šæœªé”åˆ°æœ€å„ªè§£') + '</div>';
                document.getElementById('optimal-value').textContent = '0';
                document.getElementById('shadow-prices').innerHTML = '';
                document.getElementById('range-analysis').innerHTML = '';
                if (chart) {
                    chart.destroy();
                    chart = null;
                }
            }
        }

        function renderTableau(tableau, basis, pivotRow, pivotCol) {
            const container = document.getElementById('tableau-container');
            const numVars = objectiveCoefficients.length;
            const numSlack = constraintsData.filter(c => c.operator === '<=' || c.operator === '>=').length;
            const numArtificial = constraintsData.filter(c => c.operator === '>=' || c.operator === '=').length;
            let html = '<table><thead><tr>';

            // ç”Ÿæˆè¡¨é ­
            for (let i = 0; i < numVars; i++) {
                html += `<th>x${i + 1}</th>`;
            }
            for (let i = 0; i < numSlack; i++) {
                html += `<th>s${i + 1}</th>`;
            }
            for (let i = 0; i < numArtificial; i++) {
                html += `<th>a${i + 1}</th>`;
            }
            html += '<th>RHS</th></tr></thead><tbody>';

            // ç”Ÿæˆè¡¨æ ¼å…§å®¹
            tableau.forEach((row, rowIndex) => {
                html += '<tr>';
                row.forEach((cell, colIndex) => {
                    let cellClass = '';
                    if (rowIndex < tableau.length - 1 && basis[rowIndex] === colIndex) {
                        cellClass = 'basis';
                    }
                    if (rowIndex === tableau.length - 1 && colIndex < row.length - 1 && 
                        ((document.getElementById('objective').value === 'max' && cell < -1e-10) || 
                         (document.getElementById('objective').value === 'min' && cell > 1e-10))) {
                        cellClass = 'entering';
                    }
                    if (rowIndex === pivotRow && colIndex === pivotCol) {
                        cellClass = 'pivot';
                    }
                    const displayValue = Math.abs(cell) > 1e5 || Math.abs(cell) < 1e-10 ? cell.toFixed(2) : cell.toFixed(4);
                    html += `<td class="${cellClass}" ${cellClass === 'pivot' ? `data-pivot-label="${translations[currentLanguage].pivot_element}"` : ''}>${displayValue}</td>`;
                });
                html += '</tr>';
            });

            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function extractSolution(tableau, basis) {
            const numVars = objectiveCoefficients.length;
            const variables = Array(numVars).fill(0);
            basis.forEach((varIdx, rowIdx) => {
                if (varIdx < numVars) {
                    variables[varIdx] = tableau[rowIdx][tableau[0].length - 1];
                }
            });
            const optimalValue = document.getElementById('objective').value === 'max' 
                ? tableau[tableau.length - 1][tableau[0].length - 1]
                : -tableau[tableau.length - 1][tableau[0].length - 1];
            return { variables, optimalValue };
        }

        function drawFeasibleRegion(optimalX1, optimalX2) {
            if (objectiveCoefficients.length !== 2) {
                document.getElementById('feasible-region').style.display = 'none';
                return;
            }
            document.getElementById('feasible-region').style.display = 'block';

            const ctx = document.getElementById('feasible-region').getContext('2d');
            if (chart) chart.destroy();

            const points = calculateFeasiblePoints();
            const maxX = Math.max(...points.map(p => p.x), optimalX1, 300) * 1.2;
            const maxY = Math.max(...points.map(p => p.y), optimalX2, 250) * 1.2;

            // ç¹ªè£½ç´„æŸç·š
            const constraintDatasets = constraintsData.map((c, i) => {
                const points = [];
                if (c.coefficients[0] !== 0) {
                    points.push({ x: 0, y: c.rhs / c.coefficients[1] });
                    points.push({ x: c.rhs / c.coefficients[0], y: 0 });
                } else {
                    points.push({ x: 0, y: c.rhs / c.coefficients[1] });
                    points.push({ x: maxX, y: c.rhs / c.coefficients[1] });
                }
                return {
                    label: `${translations[currentLanguage][`constraint${i+1}`] || `Constraint ${i+1}`}`,
                    data: points,
                    borderColor: `hsl(${i * 60}, 70%, 50%)`,
                    borderWidth: 2,
                    fill: false,
                    pointRadius: 0,
                    showLine: true
                };
            });

            chart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [
                        {
                            label: translations[currentLanguage].feasible_region,
                            data: points,
                            backgroundColor: 'rgba(46, 204, 113, 0.3)',
                            borderColor: 'rgba(46, 204, 113, 1)',
                            fill: true,
                            pointRadius: 0,
                            showLine: true,
                            tension: 0
                        },
                        {
                            label: translations[currentLanguage].optimal_solution_label,
                            data: [{ x: optimalX1, y: optimalX2 }],
                            backgroundColor: 'rgba(231, 76, 60, 1)',
                            pointRadius: 8
                        },
                        ...constraintDatasets
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: { display: true, text: 'xâ‚' },
                            min: 0,
                            max: maxX,
                            ticks: { stepSize: Math.ceil(maxX / 10) }
                        },
                        y: {
                            title: { display: true, text: 'xâ‚‚' },
                            min: 0,
                            max: maxY,
                            ticks: { stepSize: Math.ceil(maxY / 10) }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true
                        }
                    }
                }
            });
        }

        function calculateFeasiblePoints() {
            const points = [];
            const constraints = constraintsData.map(c => ({
                a: c.coefficients[0],
                b: c.coefficients[1],
                rhs: c.rhs,
                operator: c.operator
            }));

            // æ·»åŠ  xâ‚ â‰¥ 0, xâ‚‚ â‰¥ 0
            constraints.push({ a: 1, b: 0, rhs: 0, operator: '>=' });
            constraints.push({ a: 0, b: 1, rhs: 0, operator: '>=' });

            // è¨ˆç®—æ‰€æœ‰ç´„æŸçš„äº¤é»
            const intersections = [];
            for (let i = 0; i < constraints.length; i++) {
                for (let j = i + 1; j < constraints.length; j++) {
                    const c1 = constraints[i];
                    const c2 = constraints[j];
                    const det = c1.a * c2.b - c1.b * c2.a;
                    if (Math.abs(det) > 1e-10) {
                        const x = (c1.b * c2.rhs - c2.b * c1.rhs) / det;
                        const y = (c2.a * c1.rhs - c1.a * c2.rhs) / det;
                        if (isPointFeasible(x, y, constraints)) {
                            intersections.push({ x, y });
                        }
                    }
                }
            }

            // æ’åºé ‚é»å½¢æˆå‡¸å¤šé‚Šå½¢
            if (intersections.length > 0) {
                const centerX = intersections.reduce((sum, p) => sum + p.x, 0) / intersections.length;
                const centerY = intersections.reduce((sum, p) => sum + p.y, 0) / intersections.length;
                intersections.sort((a, b) => {
                    const angleA = Math.atan2(a.y - centerY, a.x - centerX);
                    const angleB = Math.atan2(b.y - centerY, b.x - centerX);
                    return angleA - angleB;
                });
                return intersections;
            }
            return [{ x: 0, y: 0 }]; // é è¨­é»
        }

        function isPointFeasible(x, y, constraints) {
            return constraints.every(c => {
                const value = c.a * x + c.b * y;
                if (c.operator === '<=') return value <= c.rhs + 1e-10;
                if (c.operator === '=') return Math.abs(value - c.rhs) < 1e-10;
                if (c.operator === '>=') return value >= c.rhs - 1e-10;
                return true;
            });
        }

        function performSensitivityAnalysis(tableau, basis) {
            const numVars = objectiveCoefficients.length;
            const numSlack = constraintsData.filter(c => c.operator === '<=' || c.operator === '>=').length;
            const objRow = tableau[tableau.length - 1];

            // å½±åƒ¹
            const shadowPrices = [];
            for (let i = 0; i < numSlack; i++) {
                const slackIndex = numVars + i;
                if (basis.includes(slackIndex)) {
                    shadowPrices.push(-objRow[slackIndex]);
                } else {
                    shadowPrices.push(0);
                }
            }

            // ç¯„åœåˆ†æï¼ˆç›®æ¨™å‡½æ•¸ä¿‚æ•¸ï¼‰
            const rangeAnalysis = [];
            for (let i = 0; i < numVars; i++) {
                let minChange = -Infinity;
                let maxChange = Infinity;
                for (let j = 0; j < tableau.length - 1; j++) {
                    if (basis[j] !== i && tableau[j][i] !== 0) {
                        const ratio = -objRow[i] / tableau[j][i];
                        if (tableau[j][i] > 0) {
                            maxChange = Math.min(maxChange, ratio);
                        } else if (tableau[j][i] < 0) {
                            minChange = Math.max(minChange, ratio);
                        }
                    }
                }
                rangeAnalysis.push({
                    variable: `x${i + 1}`,
                    min: objectiveCoefficients[i] + minChange,
                    max: objectiveCoefficients[i] + maxChange
                });
            }

            // å³é‚Šå¸¸æ•¸ç¯„åœ
            const rhsRanges = [];
            for (let i = 0; i < tableau.length - 1; i++) {
                let minRHS = -Infinity;
                let maxRHS = Infinity;
                for (let j = 0; j < tableau[0].length - 1; j++) {
                    if (tableau[i][j] !== 0 && !basis.includes(j)) {
                        const ratio = -tableau[i][tableau[0].length - 1] / tableau[i][j];
                        if (tableau[i][j] > 0) {
                            minRHS = Math.max(minRHS, ratio);
                        } else if (tableau[i][j] < 0) {
                            maxRHS = Math.min(maxRHS, ratio);
                        }
                    }
                }
                rhsRanges.push({
                    constraint: i + 1,
                    min: tableau[i][tableau[0].length - 1] + minRHS,
                    max: tableau[i][tableau[0].length - 1] + maxRHS
                });
            }

            // é¡¯ç¤ºçµæœ
            document.getElementById('shadow-prices').innerHTML = `
                <p>${translations[currentLanguage].shadow_prices}:<br>
                ${shadowPrices.map((p, i) => `${translations[currentLanguage].constraint}${i + 1}: ${p.toFixed(2)}`).join('<br>')}
                </p>`;
// é¡¯ç¤ºç¯„åœåˆ†æçµæœ
            document.getElementById('range-analysis').innerHTML = `
                <p>${translations[currentLanguage].range_analysis}:<br>
                <strong>${translations[currentLanguage].objective_function}:</strong><br>
                ${rangeAnalysis.map(r => `${r.variable}: [${r.min.toFixed(2)}, ${r.max.toFixed(2)}]`).join('<br>')}
                <br><strong>${translations[currentLanguage].constraints_title}:</strong><br>
                ${rhsRanges.map(r => `${translations[currentLanguage][`constraint${r.constraint}`] || `Constraint ${r.constraint}`}: [${r.min.toFixed(2)}, ${r.max.toFixed(2)}]`).join('<br>')}
                </p>`;
        }

        // èªè¨€åˆ‡æ›äº‹ä»¶
        document.getElementById('language').addEventListener('change', function() {
            updateLanguage(this.value);
        });

        // åˆå§‹åŒ–é é¢æ™‚è¨­ç½®èªè¨€
        document.addEventListener('DOMContentLoaded', () => {
            updateLanguage('zh'); // é è¨­ç‚ºä¸­æ–‡
            reset(); // åˆå§‹åŒ–é é¢ç‹€æ…‹
        });
    </script>
</body>
</html>