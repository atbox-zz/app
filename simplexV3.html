<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>claude v3ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–å·¥å…· - é€²éšç‰ˆ</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
            --purple: #9b59b6;
            --orange: #e67e22;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--light);
            padding: 20px;
            min-height: 100vh;
            overflow-x: auto;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, #a8e6cf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: none;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1000px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        
        .panel-title {
            font-size: 1.6rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary);
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .icon {
            font-size: 1.5rem;
        }
        
        .problem-input {
            display: grid;
            gap: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: var(--light);
            font-size: 1rem;
        }
        
        input, select, textarea {
            padding: 14px;
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 20px rgba(52, 152, 219, 0.3);
            transform: translateY(-2px);
        }
        
        button {
            background: linear-gradient(45deg, var(--secondary), var(--purple));
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background: linear-gradient(45deg, #7f8c8d, #95a5a6);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .controls button {
            flex: 1;
        }
        
        .btn-reset {
            background: linear-gradient(45deg, var(--accent), #c0392b);
        }
        
        .btn-next {
            background: linear-gradient(45deg, var(--success), #27ae60);
        }
        
        .btn-prev {
            background: linear-gradient(45deg, var(--warning), #d68910);
        }
        
        .result-panel {
            grid-column: 1 / -1;
        }
        
        .tableau-container {
            overflow-x: auto;
            margin-top: 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.1);
            padding: 15px;
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        th {
            background: linear-gradient(45deg, var(--dark), var(--primary));
            padding: 16px 12px;
            text-align: center;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
        }
        
        td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        tr:hover td {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        tr:last-child td {
            border-bottom: none;
        }
        
        .pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
            font-weight: bold;
            position: relative;
            animation: pulse 2s infinite;
        }
        
        .pivot::after {
            content: "ğŸ¯ æ¨è»¸";
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 6px;
            white-space: nowrap;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }
        
        .basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }
        
        .solution-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .solution-card {
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .solution-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .solution-card h3 {
            margin-bottom: 15px;
            color: var(--light);
            font-size: 1.2rem;
        }
        
        .solution-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--success), #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .variables {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }
        
        .variable {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
            padding: 10px 18px;
            border-radius: 25px;
            font-weight: 600;
            border: 1px solid rgba(52, 152, 219, 0.5);
        }
        
        .step-info {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 15px;
            line-height: 1.7;
            border-left: 4px solid var(--secondary);
        }
        
        .step-title {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .case-description {
            background: linear-gradient(145deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.1));
            border: 2px solid rgba(52, 152, 219, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            line-height: 1.7;
        }
        
        .case-description h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            margin-top: 25px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .case-description h3:first-child {
            margin-top: 0;
        }
        
        .case-description ul {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        .case-description li {
            margin-bottom: 10px;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 30px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.1));
            border-radius: 20px;
            line-height: 1.8;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .instructions h2 {
            margin-bottom: 20px;
            color: white;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .instructions ul {
            padding-left: 30px;
            margin-top: 15px;
        }
        
        .instructions li {
            margin-bottom: 15px;
        }
        
        .instructions code {
            background: rgba(0, 0, 0, 0.4);
            padding: 4px 8px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            color: var(--warning);
            font-weight: 600;
        }
        
        .highlight {
            color: var(--success);
            font-weight: bold;
        }
        
        .legend {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
        }
        
        .legend-pivot {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.7), rgba(192, 57, 43, 0.7));
        }
        
        .legend-basis {
            background: linear-gradient(45deg, rgba(46, 204, 113, 0.3), rgba(39, 174, 96, 0.3));
        }
        
        .legend-entering {
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(41, 128, 185, 0.3));
        }

        .error-message {
            background: linear-gradient(45deg, rgba(231, 76, 60, 0.2), rgba(192, 57, 43, 0.2));
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 18px;
            margin: 15px 0;
            color: white;
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 15px;
            line-height: 1.6;
        }

        .algorithm-info {
            background: linear-gradient(145deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
            border: 2px solid rgba(155, 89, 182, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            line-height: 1.7;
        }

        .algorithm-info h3 {
            color: var(--purple);
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .step-counter {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .counter {
            background: var(--secondary);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¯ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–è§£æ±ºæ–¹æ¡ˆ</h1>
            <p class="subtitle">
                æ­¤å·¥å…·æ¡ç”¨å–®å½¢æ³• (Simplex Method) æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œï¼Œä¸¦æä¾›å®Œæ•´çš„è¨ˆç®—éç¨‹å¯è¦–åŒ–ã€‚
                é©ç”¨æ–¼ç”Ÿç”¢è¦åŠƒã€è³‡æºåˆ†é…ã€åˆ©æ½¤æœ€å¤§åŒ–ç­‰å¯¦éš›å•†æ¥­å•é¡Œçš„æ±‚è§£èˆ‡æ•™å­¸ã€‚
            </p>
        </header>
        
        <div class="content">
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“Š</span>
                    å•é¡Œè¼¸å…¥
                </h2>
                <div class="problem-input">
                    <div class="input-group">
                        <label for="objective">ğŸ¯ ç›®æ¨™å‡½æ•¸é¡å‹</label>
                        <select id="objective">
                            <option value="max">æœ€å¤§åŒ– (Maximize)</option>
                            <option value="min">æœ€å°åŒ– (Minimize)</option>
                        </select>
                    </div>
                    
                    <div class="input-group">
                        <label for="function">ğŸ’° ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ (ç”¨é€—è™Ÿåˆ†éš”ï¼Œä¾‹å¦‚: 800,1200)</label>
                        <input type="text" id="function" value="800,1200" placeholder="ä¾‹å¦‚: 800,1200">
                    </div>
                    
                    <div class="input-group">
                        <label for="constraints">âš–ï¸ ç´„æŸæ¢ä»¶ (æ¯è¡Œä¸€å€‹ç´„æŸï¼Œæ ¼å¼: ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸)</label>
                        <textarea id="constraints" rows="6">4,6,<=,2400
2,2,<=,800
1,3,<=,900
1,0,<=,300
0,1,<=,250</textarea>
                    </div>
                    
                    <button id="solve-btn">ğŸš€ æ±‚è§£å•é¡Œ</button>
                </div>
            </div>
            
            <div class="panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ®</span>
                    è¨ˆç®—æ§åˆ¶
                </h2>
                
                <div class="step-counter">
                    <span>ç•¶å‰æ­¥é©Ÿï¼š</span>
                    <span class="counter" id="step-counter">0 / 0</span>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                
                <div class="controls">
                    <button id="prev-btn" class="btn-prev" disabled>â¬…ï¸ ä¸Šä¸€æ­¥</button>
                    <button id="next-btn" class="btn-next" disabled>ä¸‹ä¸€æ­¥ â¡ï¸</button>
                    <button id="reset-btn" class="btn-reset">ğŸ”„ é‡ç½®</button>
                </div>
                
                <div class="step-info">
                    <h3 class="step-title">
                        <span>ğŸ“</span>
                        æ­¥é©Ÿèªªæ˜
                    </h3>
                    <p id="step-description">é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚</p>
                </div>
                
                <div class="solution-box">
                    <div class="solution-card">
                        <h3>ğŸ­ æœ€å„ªè§£ (ç”Ÿç”¢æ•¸é‡)</h3>
                        <div class="variables" id="solution-variables">
                            <div class="variable">5nmæ™¶ç‰‡ = <span id="x1">0</span> ç‰‡</div>
                            <div class="variable">3nmæ™¶ç‰‡ = <span id="x2">0</span> ç‰‡</div>
                        </div>
                    </div>
                    
                    <div class="solution-card">
                        <h3>ğŸ’° æœ€å¤§åˆ©æ½¤</h3>
                        <div class="solution-value" id="optimal-value">0</div>
                        <div style="font-size: 0.9rem; margin-top: 8px; opacity: 0.8;">è¬å°å¹£</div>
                    </div>
                </div>
            </div>
            
            <div class="panel result-panel">
                <h2 class="panel-title">
                    <span class="icon">ğŸ“‹</span>
                    å–®å½¢è¡¨è¨ˆç®—éç¨‹
                </h2>
                
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color legend-pivot"></div>
                        <span>æ¨è»¸å…ƒç´  (Pivot Element)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-basis"></div>
                        <span>åŸºè®Šé‡ (Basic Variables)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color legend-entering"></div>
                        <span>é€²å…¥è®Šé‡ (Entering Variable)</span>
                    </div>
                </div>
                
                <div class="tableau-container" id="tableau-container">
                    <p class="step-info">è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚</p>
                </div>
            </div>
        </div>
        
        <div class="case-description">
            <h3>ğŸ¢ å¯¦éš›æ¡ˆä¾‹ï¼šå°ç©é›»æ™¶ç‰‡ç”Ÿç”¢è¦åŠƒ</h3>
            <p>
                æœ¬å·¥å…·ä»¥å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ç‚ºä¾‹ï¼Œå±•ç¤ºç·šæ€§è¦åŠƒåœ¨å¯¦éš›è£½é€ æ¥­ä¸­çš„æ‡‰ç”¨ã€‚
                å‡è¨­å°ç©é›»éœ€è¦æ±ºå®š5nmå’Œ3nmæ™¶ç‰‡çš„æœ€å„ªç”Ÿç”¢é…ç½®ï¼Œä»¥æœ€å¤§åŒ–åˆ©æ½¤ã€‚
            </p>
            
            <h3>ğŸ“Š å•é¡Œè¨­å®š</h3>
            <ul>
                <li><strong>æ±ºç­–è®Šé‡ï¼š</strong>xâ‚ = 5nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡ï¼Œxâ‚‚ = 3nmæ™¶ç‰‡ç”Ÿç”¢æ•¸é‡</li>
                <li><strong>ç›®æ¨™å‡½æ•¸ï¼š</strong>æœ€å¤§åŒ–åˆ©æ½¤ = 800xâ‚ + 1200xâ‚‚ (è¬å°å¹£)</li>
                <li><strong>ç´„æŸæ¢ä»¶ï¼š</strong>
                    <ul>
                        <li>è¨­å‚™æ™‚é–“é™åˆ¶ï¼š4xâ‚ + 6xâ‚‚ â‰¤ 2400 (å°æ™‚)</li>
                        <li>åŸæ–™é™åˆ¶ï¼š2xâ‚ + 2xâ‚‚ â‰¤ 800 (å–®ä½)</li>
                        <li>æŠ€è¡“äººå“¡é™åˆ¶ï¼šxâ‚ + 3xâ‚‚ â‰¤ 900 (äººæ™‚)</li>
                        <li>5nmç”¢èƒ½ä¸Šé™ï¼šxâ‚ â‰¤ 300 (ç‰‡)</li>
                        <li>3nmç”¢èƒ½ä¸Šé™ï¼šxâ‚‚ â‰¤ 250 (ç‰‡)</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ğŸ¯ å­¸ç¿’ç›®æ¨™</h3>
            <ul>
                <li>ç†è§£ç·šæ€§è¦åŠƒå•é¡Œçš„æ¨™æº–å½¢å¼è½‰æ›</li>
                <li>æŒæ¡å–®å½¢æ³•çš„è¨ˆç®—æ­¥é©Ÿèˆ‡æ¨è»¸é‹ç®—</li>
                <li>å­¸ç¿’å¦‚ä½•è§£è®€å–®å½¢è¡¨ä¸­çš„æ•¸æ“šæ„ç¾©</li>
                <li>äº†è§£åŸºè®Šé‡ã€éåŸºè®Šé‡çš„æ¦‚å¿µ</li>
                <li>æŒæ¡æœ€å„ªæ€§æª¢é©—èˆ‡è§£çš„åˆ¤å®š</li>
            </ul>
        </div>
        
        <div class="algorithm-info">
            <h3>ğŸ§® å–®å½¢æ³•ç®—æ³•èªªæ˜</h3>
            <p>
                å–®å½¢æ³• (Simplex Method) æ˜¯æ±‚è§£ç·šæ€§è¦åŠƒå•é¡Œæœ€ç¶“å…¸çš„ç®—æ³•ï¼Œç”± George Dantzig æ–¼1947å¹´æå‡ºã€‚
                è©²ç®—æ³•é€šéç³»çµ±æ€§åœ°ç§»å‹•åˆ°ç›¸é„°çš„åŸºå¯è¡Œè§£ï¼Œé€æ­¥æ”¹å–„ç›®æ¨™å‡½æ•¸å€¼ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å„ªè§£ã€‚
            </p>
            <ul>
                <li><strong>ç¬¬ä¸€æ­¥ï¼š</strong>å°‡å•é¡Œè½‰æ›ç‚ºæ¨™æº–å½¢å¼ï¼Œæ·»åŠ é¬†å¼›è®Šæ•¸</li>
                <li><strong>ç¬¬äºŒæ­¥ï¼š</strong>å»ºç«‹åˆå§‹å–®å½¢è¡¨ï¼Œæ‰¾åˆ°åˆå§‹åŸºå¯è¡Œè§£</li>
                <li><strong>ç¬¬ä¸‰æ­¥ï¼š</strong>æª¢æŸ¥æœ€å„ªæ€§æ¢ä»¶ï¼ˆç›®æ¨™å‡½æ•¸è¡Œä¿‚æ•¸ï¼‰</li>
                <li><strong>ç¬¬å››æ­¥ï¼š</strong>è‹¥æœªé”æœ€å„ªï¼Œé¸æ“‡é€²å…¥è®Šæ•¸å’Œé›¢é–‹è®Šæ•¸</li>
                <li><strong>ç¬¬äº”æ­¥ï¼š</strong>åŸ·è¡Œæ¨è»¸é‹ç®—ï¼Œæ›´æ–°å–®å½¢è¡¨</li>
                <li><strong>é‡è¤‡æ­¥é©Ÿ3-5</strong>ç›´åˆ°é”åˆ°æœ€å„ªè§£</li>
            </ul>
        </div>
        
        <div class="instructions">
            <h2>ğŸ“– è©³ç´°ä½¿ç”¨èªªæ˜</h2>
            <ul>
                <li><span class="highlight">ç›®æ¨™å‡½æ•¸è¨­å®š</span>ï¼šè¼¸å…¥ç›®æ¨™å‡½æ•¸çš„ä¿‚æ•¸ï¼Œç”¨é€—è™Ÿåˆ†éš”ã€‚ä¾‹å¦‚æœ€å¤§åŒ–åˆ©æ½¤ z = 800xâ‚ + 1200xâ‚‚ æ‡‰è¼¸å…¥ <code>800,1200</code></li>
                <li><span class="highlight">ç´„æŸæ¢ä»¶æ ¼å¼</span>ï¼šæ¯è¡Œè¼¸å…¥ä¸€å€‹ç´„æŸæ¢ä»¶ï¼Œæ ¼å¼ç‚º <code>ä¿‚æ•¸1,ä¿‚æ•¸2,é‹ç®—ç¬¦,å¸¸æ•¸</code>ã€‚ä¾‹å¦‚ 4xâ‚ + 6xâ‚‚ â‰¤ 2400 æ‡‰è¼¸å…¥ <code>4,6,<=,2400</code></li>
                <li><span class="highlight">æ”¯æŒé‹ç®—ç¬¦</span>ï¼š<code>&lt;=</code> (å°æ–¼ç­‰æ–¼), <code>=</code> (ç­‰æ–¼), <code>&gt;=</code> (å¤§æ–¼ç­‰æ–¼)</li>
                <li><span class="highlight">æ±‚è§£éç¨‹</span>ï¼šé»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•è¨ˆç®—ä¸¦é¡¯ç¤ºåˆå§‹å–®å½¢è¡¨</li>
                <li><span class="highlight">é€æ­¥æ¼”ç¤º</span>ï¼šä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥è¨ˆç®—éç¨‹</li>
                <li><span class="highlight">è¦–è¦ºåŒ–å…ƒç´ </span>ï¼šè¡¨æ ¼ä¸­ä¸åŒé¡è‰²æ¨™ç¤ºä¸åŒé¡å‹çš„è®Šæ•¸å’Œæ“ä½œ</li>
                <li><span class="highlight">é€²åº¦è¿½è¹¤</span>ï¼šé ‚éƒ¨é€²åº¦æ¢é¡¯ç¤ºç•¶å‰æ±‚è§£é€²åº¦</li>
            </ul>
        </div>
        
        <footer>
            <p><strong>ğŸ“ ç·šæ€§è¦åŠƒå–®å½¢æ³•å¯è¦–åŒ–æ•™å­¸å·¥å…·</strong></p>
            <p>
                æœ¬å·¥å…·å°ˆç‚ºç·šæ€§è¦åŠƒæ•™å­¸è¨­è¨ˆï¼Œå¹«åŠ©å­¸ç”Ÿç†è§£å–®å½¢æ³•çš„è¨ˆç®—åŸç†å’Œå¯¦éš›æ‡‰ç”¨ã€‚
                é©ç”¨æ–¼é‹ç±Œå­¸ã€ç®¡ç†ç§‘å­¸ã€å·¥æ¥­å·¥ç¨‹ç­‰ç›¸é—œèª²ç¨‹çš„æ•™å­¸èˆ‡è‡ªå­¸ã€‚
            </p>
            <p style="margin-top: 15px;">
                <em>ğŸ’¡ æç¤ºï¼šå»ºè­°é…åˆæ•™ç§‘æ›¸å…§å®¹ä½¿ç”¨ï¼Œæ·±å…¥ç†è§£æ¯å€‹æ­¥é©Ÿçš„æ•¸å­¸åŸç†</em>
            </p>
        </footer>
    </div>

    <script>
        class SimplexSolver {
            constructor() {
                this.reset();
            }
            
            reset() {
                this.c = [];
                this.A = [];
                this.b = [];
                this.m = 0;
                this.n = 0;
                this.tableau = [];
                this.basis = [];
                this.history = [];
                this.currentStep = 0;
                this.solution = [];
                this.optimalValue = 0;
                this.objective = 'max';
                this.isUnbounded = false;
                this.iterationCount = 0;
            }
            
            // åˆå§‹åŒ–æ±‚è§£å™¨
            init(c, A, b, objective) {
                this.c = [...c];
                this.A = A.map(row => [...row]);
                this.b = [...b];
                this.m = b.length;
                this.n = c.length;
                this.objective = objective;
                this.history = [];
                this.currentStep = 0;
                this.isUnbounded = false;
                this.iterationCount = 0;
                
                // æª¢é©—è¼¸å…¥æœ‰æ•ˆæ€§
                if (!this.validateInput()) {
                    throw new Error("è¼¸å…¥æ•¸æ“šç„¡æ•ˆ");
                }
                
                // åˆå§‹åŒ–å–®å½¢è¡¨
                this.initializeTableau();
            }
            
            // é©—è­‰è¼¸å…¥
            validateInput() {
                if (this.n === 0 || this.m === 0) return false;
                if (this.A.some(row => row.length !== this.n)) return false;
                if (this.b.some(val => val < 0)) return false;
                return true;
            }
            
            // åˆå§‹åŒ–å–®å½¢è¡¨
            initializeTableau() {
                // å‰µå»ºå–®å½¢è¡¨ï¼šmè¡Œç´„æŸ + 1è¡Œç›®æ¨™å‡½æ•¸, nå€‹åŸè®Šæ•¸ + må€‹é¬†å¼›è®Šæ•¸ + 1å€‹è§£åˆ—
                this.tableau = Array(this.m + 1).fill().map(() => Array(this.n + this.m + 1).fill(0));
                this.basis = Array(this.m).fill().map((_, i) => this.n + i);
                
                // å¡«å……ç´„æŸä¿‚æ•¸å’Œé¬†å¼›è®Šæ•¸
                for (let i = 0; i < this.m; i++) {
                    // åŸå§‹è®Šæ•¸ä¿‚æ•¸
                    for (let j = 0; j < this.n; j++) {
                        this.tableau[i][j] = this.A[i][j];
                    }
                    // é¬†å¼›è®Šæ•¸ä¿‚æ•¸ (å–®ä½çŸ©é™£)
                    this.tableau[i][this.n + i] = 1;
                    // å³ç«¯é …
                    this.tableau[i][this.n + this.m] = this.b[i];
                }
                
                // ç›®æ¨™å‡½æ•¸è¡Œ
                for (let j = 0; j < this.n; j++) {
                    // å°æ–¼æœ€å¤§åŒ–å•é¡Œï¼Œç›®æ¨™å‡½æ•¸ä¿‚æ•¸å–è² å€¼
                    this.tableau[this.m][j] = this.objective === 'max' ? -this.c[j] : this.c[j];
                }
                
                // è¨˜éŒ„åˆå§‹ç‹€æ…‹
                this.recordStep("ğŸš€ åˆå§‹åŒ–å–®å½¢è¡¨", -1, -1, "å»ºç«‹åˆå§‹å¯è¡Œè§£ï¼Œæ‰€æœ‰é¬†å¼›è®Šæ•¸ä½œç‚ºåŸºè®Šé‡");
            }
            
            // è¨˜éŒ„ç•¶å‰æ­¥é©Ÿ
            recordStep(description, pivotRow = -1, pivotCol = -1, details = "") {
                const tableauCopy = this.tableau.map(row => [...row]);
                const basisCopy = [...this.basis];
                
                const stepData = {
                    step: this.history.length + 1,
                    description,
                    details,
                    tableau: tableauCopy,
                    basis: basisCopy,
                    pivotRow,
                    pivotCol,
                    iteration: this.iterationCount
                };
                
                this.history.push(stepData);
                console.log(`Recorded step ${stepData.step}: ${description}`, stepData);
            }
            
            // æª¢æŸ¥æ˜¯å¦é”åˆ°æœ€å„ªè§£
            isOptimal() {
                const objectiveRow = this.tableau[this.m];
                console.log('Checking optimality. Objective row:', objectiveRow);
                
                if (this.objective === 'max') {
                    // æœ€å¤§åŒ–ï¼šç•¶ç›®æ¨™å‡½æ•¸è¡Œä¸­çš„æ±ºç­–è®Šæ•¸ä¿‚æ•¸éƒ½ >= 0 æ™‚æ‰æ˜¯æœ€å„ª
                    for (let j = 0; j < this.n; j++) {
                        if (objectiveRow[j] < -1e-10) {
                            console.log(`Not optimal: coefficient at column ${j} (${this.getVariableName(j)}) is ${objectiveRow[j]}`);
                            return false;
                        }
                    }
                } else {
                    // æœ€å°åŒ–ï¼šç•¶ç›®æ¨™å‡½æ•¸è¡Œä¸­çš„æ±ºç­–è®Šæ•¸ä¿‚æ•¸éƒ½ <= 0 æ™‚æ‰æ˜¯æœ€å„ª
                    for (let j = 0; j < this.n; j++) {
                        if (objectiveRow[j] > 1e-10) {
                            console.log(`Not optimal: coefficient at column ${j} (${this.getVariableName(j)}) is ${objectiveRow[j]}`);
                            return false;
                        }
                    }
                }
                console.log('Solution is optimal - all coefficients satisfy optimality conditions');
                return true;
            }
            
            // é¸æ“‡é€²å…¥è®Šæ•¸ (entering variable)
            getEnteringVariable() {
                const objectiveRow = this.tableau[this.m];
                let bestCol = -1;
                
                if (this.objective === 'max') {
                    // æœ€å¤§åŒ–å•é¡Œï¼šé¸æ“‡æœ€å°çš„è² ä¿‚æ•¸ï¼ˆæœ€è² çš„ï¼‰
                    let mostNegative = 0;
                    for (let j = 0; j < this.n; j++) {
                        if (objectiveRow[j] < mostNegative - 1e-10) {
                            mostNegative = objectiveRow[j];
                            bestCol = j;
                        }
                    }
                } else {
                    // æœ€å°åŒ–å•é¡Œï¼šé¸æ“‡æœ€å¤§çš„æ­£ä¿‚æ•¸
                    let mostPositive = 0;
                    for (let j = 0; j < this.n; j++) {
                        if (objectiveRow[j] > mostPositive + 1e-10) {
                            mostPositive = objectiveRow[j];
                            bestCol = j;
                        }
                    }
                }
                
                console.log(`Best entering variable: column ${bestCol} with coefficient ${bestCol >= 0 ? objectiveRow[bestCol] : 'N/A'}`);
                return bestCol;
            }
            
            // é¸æ“‡é›¢é–‹è®Šæ•¸ (leaving variable) - æœ€å°æ¯”ä¾‹æ¸¬è©¦
            getLeavingVariable(enterCol) {
                let minRatio = Infinity;
                let leaveRow = -1;
                
                for (let i = 0; i < this.m; i++) {
                    const pivot = this.tableau[i][enterCol];
                    const rhs = this.tableau[i][this.n + this.m];
                    
                    if (pivot > 1e-10) { // åªè€ƒæ…®æ­£å€¼
                        const ratio = rhs / pivot;
                        if (ratio >= -1e-10 && ratio < minRatio) { // å…è¨±å°çš„è² å€¼èª¤å·®
                            minRatio = ratio;
                            leaveRow = i;
                        }
                    }
                }
                
                console.log(`Leaving variable: row ${leaveRow} with ratio ${minRatio}`);
                return leaveRow;
            }
            
            // æª¢æŸ¥æ˜¯å¦ç„¡ç•Œ
            checkUnbounded(enterCol) {
                for (let i = 0; i < this.m; i++) {
                    if (this.tableau[i][enterCol] > 1e-10) {
                        return false; // å­˜åœ¨æ­£çš„ä¿‚æ•¸ï¼Œä¸æ˜¯ç„¡ç•Œ
                    }
                }
                return true; // æ‰€æœ‰ä¿‚æ•¸éƒ½ <= 0ï¼Œå•é¡Œç„¡ç•Œ
            }
            
            // æ¨è»¸é‹ç®— (pivoting)
            pivot(pivotRow, pivotCol) {
                const pivotElement = this.tableau[pivotRow][pivotCol];
                
                if (Math.abs(pivotElement) < 1e-10) {
                    throw new Error("æ¨è»¸å…ƒç´ éå°ï¼Œç„¡æ³•é€²è¡Œé‹ç®—");
                }
                
                // æ›´æ–°åŸºè®Šæ•¸
                this.basis[pivotRow] = pivotCol;
                
                // ç¬¬ä¸€æ­¥ï¼šæ­£è¦åŒ–æ¨è»¸è¡Œ
                for (let j = 0; j <= this.n + this.m; j++) {
                    this.tableau[pivotRow][j] /= pivotElement;
                }
                
                // ç¬¬äºŒæ­¥ï¼šæ¶ˆé™¤å…¶ä»–è¡Œå°æ‡‰åˆ—çš„ä¿‚æ•¸
                for (let i = 0; i <= this.m; i++) {
                    if (i === pivotRow) continue;
                    
                    const factor = this.tableau[i][pivotCol];
                    for (let j = 0; j <= this.n + this.m; j++) {
                        this.tableau[i][j] -= factor * this.tableau[pivotRow][j];
                    }
                }
                
                // æ¸…ç†æ•¸å€¼èª¤å·®
                this.cleanupNumericalErrors();
            }
            
            // æ¸…ç†æ•¸å€¼èª¤å·®
            cleanupNumericalErrors() {
                for (let i = 0; i <= this.m; i++) {
                    for (let j = 0; j <= this.n + this.m; j++) {
                        if (Math.abs(this.tableau[i][j]) < 1e-10) {
                            this.tableau[i][j] = 0;
                        }
                    }
                }
            }
            
            // ä¸»æ±‚è§£æ–¹æ³•
            solve() {
                const maxIterations = 100;
                
                console.log('Starting solve process');
                
                while (!this.isOptimal() && this.iterationCount < maxIterations) {
                    this.iterationCount++;
                    console.log(`\n=== Iteration ${this.iterationCount} ===`);
                    
                    // é¸æ“‡é€²å…¥è®Šæ•¸
                    const enterCol = this.getEnteringVariable();
                    if (enterCol === -1) {
                        this.recordStep("âŒ ç„¡æ³•æ‰¾åˆ°é€²å…¥è®Šæ•¸ï¼Œç®—æ³•çµ‚æ­¢", -1, -1, "æ²’æœ‰å¯ä»¥æ”¹å–„ç›®æ¨™å‡½æ•¸çš„è®Šæ•¸");
                        break;
                    }
                    
                    // æª¢æŸ¥ç„¡ç•Œæ€§
                    if (this.checkUnbounded(enterCol)) {
                        this.isUnbounded = true;
                        const enterVar = this.getVariableName(enterCol);
                        this.recordStep(`ğŸš« å•é¡Œç„¡ç•Œ`, -1, enterCol, 
                            `é€²å…¥è®Šæ•¸ ${enterVar} çš„æ‰€æœ‰ä¿‚æ•¸éƒ½éæ­£ï¼Œç›®æ¨™å‡½æ•¸å€¼å¯ä»¥ç„¡é™å¢å¤§`);
                        throw new Error("å•é¡Œç„¡ç•Œï¼Œç„¡æœ€å„ªè§£");
                    }
                    
                    // é¸æ“‡é›¢é–‹è®Šæ•¸
                    const leaveRow = this.getLeavingVariable(enterCol);
                    if (leaveRow === -1) {
                        this.recordStep("âŒ ç„¡æ³•æ‰¾åˆ°é›¢é–‹è®Šæ•¸", -1, enterCol, "æœ€å°æ¯”ä¾‹æ¸¬è©¦å¤±æ•—");
                        throw new Error("ç®—æ³•éŒ¯èª¤ï¼šç„¡æ³•ç¢ºå®šé›¢é–‹è®Šæ•¸");
                    }
                    
                    // è¨˜éŒ„é¸æ“‡æ­¥é©Ÿ
                    const enterVar = this.getVariableName(enterCol);
                    const leaveVar = this.getVariableName(this.basis[leaveRow]);
                    const ratio = (this.tableau[leaveRow][this.n + this.m] / this.tableau[leaveRow][enterCol]).toFixed(3);
                    
                    this.recordStep(
                        `ğŸ”„ ç¬¬${this.iterationCount}æ¬¡è¿­ä»£ï¼šè®Šæ•¸äº¤æ›`, 
                        leaveRow, 
                        enterCol,
                        `é€²å…¥è®Šæ•¸: ${enterVar}, é›¢é–‹è®Šæ•¸: ${leaveVar}, æ¨è»¸æ¯”ä¾‹: ${ratio}`
                    );
                    
                    // åŸ·è¡Œæ¨è»¸é‹ç®—
                    console.log('Pivot element at row', leaveRow, 'col', enterCol, '=', this.tableau[leaveRow][enterCol]);
                    this.pivot(leaveRow, enterCol);
                    
                    // è¨˜éŒ„æ¨è»¸é‹ç®—å¾Œç‹€æ…‹
                    this.recordStep(
                        `âœ… æ¨è»¸é‹ç®—å®Œæˆ`, 
                        -1, -1, 
                        `åŸºè®Šæ•¸æ›´æ–°ï¼š${leaveVar} â†’ ${enterVar}`
                    );
                }
                
                if (this.iterationCount >= maxIterations) {
                    throw new Error("é”åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•¸ï¼Œç®—æ³•å¯èƒ½æœªæ”¶æ–‚");
                }
                
                if (!this.isUnbounded) {
                    // è¨˜éŒ„æœ€çµ‚è§£
                    this.recordStep("ğŸ‰ é”åˆ°æœ€å„ªè§£", -1, -1, 
                        `ç¶“é ${this.iterationCount} æ¬¡è¿­ä»£æ‰¾åˆ°æœ€å„ªè§£`);
                    
                    // è¨ˆç®—æœ€çµ‚è§£
                    this.computeSolution();
                }
                
                console.log(`Solve completed in ${this.iterationCount} iterations`);
                return true;
            }
            
            // ç²å–è®Šæ•¸åç¨±
            getVariableName(index) {
                if (index < this.n) {
                    return `xâ‚`.replace('â‚', `â‚`)[0] + `${index + 1}`.split('').map(d => 
                        ['â‚€','â‚','â‚‚','â‚ƒ','â‚„','â‚…','â‚†','â‚‡','â‚ˆ','â‚‰'][parseInt(d)]
                    ).join('');
                } else if (index < this.n + this.m) {
                    const slackIndex = index - this.n + 1;
                    return `s${slackIndex}`.replace(slackIndex, `${slackIndex}`.split('').map(d => 
                        ['â‚€','â‚','â‚‚','â‚ƒ','â‚„','â‚…','â‚†','â‚‡','â‚ˆ','â‚‰'][parseInt(d)]
                    ).join(''));
                } else {
                    return `unknown`;
                }
            }
            
            // è¨ˆç®—æœ€çµ‚è§£
            computeSolution() {
                this.solution = Array(this.n).fill(0);
                
                // å¾åŸºè®Šæ•¸ä¸­æå–è§£
                for (let i = 0; i < this.m; i++) {
                    const varIndex = this.basis[i];
                    if (varIndex < this.n) {
                        this.solution[varIndex] = Math.max(0, this.tableau[i][this.n + this.m]);
                    }
                }
                
                // è¨ˆç®—ç›®æ¨™å‡½æ•¸å€¼
                this.optimalValue = this.tableau[this.m][this.n + this.m];
                if (this.objective === 'max') {
                    this.optimalValue = -this.optimalValue;
                }
                
                // ç¢ºä¿éè² 
                this.optimalValue = Math.max(0, this.optimalValue);
            }
            
            // ç²å–ç•¶å‰æ­¥é©Ÿæ•¸æ“š
            getCurrentStep() {
                if (this.currentStep >= 0 && this.currentStep < this.history.length) {
                    return this.history[this.currentStep];
                }
                return null;
            }
        }

        // DOMå…ƒç´ å¼•ç”¨
        const solveBtn = document.getElementById('solve-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const resetBtn = document.getElementById('reset-btn');
        const tableauContainer = document.getElementById('tableau-container');
        const optimalValueDisplay = document.getElementById('optimal-value');
        const solutionVariables = document.getElementById('solution-variables');
        const stepDescription = document.getElementById('step-description');
        const stepCounter = document.getElementById('step-counter');
        const progressFill = document.getElementById('progress-fill');
        
        // å‰µå»ºæ±‚è§£å™¨å¯¦ä¾‹
        const solver = new SimplexSolver();
        
        // éŒ¯èª¤è™•ç†å‡½æ•¸
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.innerHTML = `<strong>âŒ éŒ¯èª¤ï¼š</strong>${message}`;
            
            // ç§»é™¤ç¾æœ‰éŒ¯èª¤è¨Šæ¯
            const existingError = document.querySelector('.error-message');
            if (existingError) {
                existingError.remove();
            }
            
            // åœ¨æ±‚è§£æŒ‰éˆ•å¾Œæ·»åŠ éŒ¯èª¤è¨Šæ¯
            solveBtn.parentNode.insertBefore(errorDiv, solveBtn.nextSibling);
            
            // 5ç§’å¾Œè‡ªå‹•ç§»é™¤éŒ¯èª¤è¨Šæ¯
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 6000);
        }
        
        // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'error-message';
            successDiv.style.background = 'linear-gradient(45deg, rgba(46, 204, 113, 0.2), rgba(39, 174, 96, 0.2))';
            successDiv.style.borderColor = 'var(--success)';
            successDiv.innerHTML = `<strong>âœ… æˆåŠŸï¼š</strong>${message}`;
            
            // ç§»é™¤ç¾æœ‰è¨Šæ¯
            const existingMessage = document.querySelector('.error-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            solveBtn.parentNode.insertBefore(successDiv, solveBtn.nextSibling);
            
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.parentNode.removeChild(successDiv);
                }
            }, 4000);
        }
        
        // è§£æç´„æŸæ¢ä»¶
        function parseConstraints(constraintsText) {
            const lines = constraintsText.split('\n').filter(line => line.trim() !== '');
            const A = [];
            const b = [];
            
            for (const line of lines) {
                const parts = line.trim().split(',');
                if (parts.length < 4) {
                    throw new Error(`ç´„æŸæ¢ä»¶æ ¼å¼éŒ¯èª¤: ${line}`);
                }
                
                // è§£æä¿‚æ•¸
                const coeffs = [];
                let i = 0;
                while (i < parts.length - 2) {
                    const coeff = parseFloat(parts[i].trim());
                    if (isNaN(coeff)) {
                        throw new Error(`ç„¡æ•ˆçš„ä¿‚æ•¸: ${parts[i]}`);
                    }
                    coeffs.push(coeff);
                    i++;
                }
                
                // è§£æé‹ç®—ç¬¦
                const operator = parts[parts.length - 2].trim();
                if (!['<=', '=', '>='].includes(operator)) {
                    throw new Error(`ä¸æ”¯æ´çš„é‹ç®—ç¬¦: ${operator}`);
                }
                
                // è§£æå³ç«¯é …
                const rhs = parseFloat(parts[parts.length - 1].trim());
                if (isNaN(rhs)) {
                    throw new Error(`ç„¡æ•ˆçš„å³ç«¯é …: ${parts[parts.length - 1]}`);
                }
                
                // ç›®å‰åªæ”¯æ´ <= ç´„æŸ
                if (operator !== '<=') {
                    throw new Error(`ç›®å‰åªæ”¯æ´ <= ç´„æŸæ¢ä»¶ï¼Œä¸æ”¯æ´: ${operator}`);
                }
                
                if (rhs < 0) {
                    throw new Error(`å³ç«¯é …å¿…é ˆéè² : ${rhs}`);
                }
                
                A.push(coeffs);
                b.push(rhs);
            }
            
            return { A, b };
        }
        
        // æ›´æ–°é€²åº¦
        function updateProgress() {
            const totalSteps = solver.history.length;
            const currentStep = solver.currentStep + 1;
            const progress = totalSteps > 0 ? (currentStep / totalSteps) * 100 : 0;
            
            stepCounter.textContent = `${currentStep} / ${totalSteps}`;
            progressFill.style.width = `${progress}%`;
        }
        
        // æ±‚è§£æŒ‰éˆ•é»æ“Šäº‹ä»¶
        solveBtn.addEventListener('click', () => {
            try {
                // ç§»é™¤ç¾æœ‰è¨Šæ¯
                const existingMessage = document.querySelector('.error-message');
                if (existingMessage) {
                    existingMessage.remove();
                }
                
                // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
                solveBtn.textContent = 'ğŸ”„ è¨ˆç®—ä¸­...';
                solveBtn.disabled = true;
                
                setTimeout(() => {
                    try {
                        // ç²å–è¼¸å…¥å€¼
                        const objective = document.getElementById('objective').value;
                        const funcInput = document.getElementById('function').value.trim();
                        const constraintsInput = document.getElementById('constraints').value.trim();
                        
                        if (!funcInput || !constraintsInput) {
                            throw new Error("è«‹è¼¸å…¥å®Œæ•´çš„å•é¡Œæ•¸æ“š");
                        }
                        
                        // è§£æç›®æ¨™å‡½æ•¸
                        const c = funcInput.split(',').map(s => {
                            const num = parseFloat(s.trim());
                            if (isNaN(num)) {
                                throw new Error(`ç„¡æ•ˆçš„ç›®æ¨™å‡½æ•¸ä¿‚æ•¸: ${s.trim()}`);
                            }
                            return num;
                        });
                        
                        if (c.length === 0) {
                            throw new Error("ç›®æ¨™å‡½æ•¸ä¿‚æ•¸ä¸èƒ½ç‚ºç©º");
                        }
                        
                        // è§£æç´„æŸæ¢ä»¶
                        const { A, b } = parseConstraints(constraintsInput);
                        
                        // æª¢æŸ¥ç¶­åº¦ä¸€è‡´æ€§
                        if (A.some(row => row.length !== c.length)) {
                            throw new Error("ç´„æŸæ¢ä»¶çš„è®Šæ•¸å€‹æ•¸èˆ‡ç›®æ¨™å‡½æ•¸ä¸ä¸€è‡´");
                        }
                        
                        // é‡ç½®æ±‚è§£å™¨ä¸¦åˆå§‹åŒ–
                        solver.reset();
                        solver.init(c, A, b, objective);
                        
                        // æ±‚è§£å•é¡Œ
                        solver.solve();
                        
                        // å•Ÿç”¨æ§åˆ¶æŒ‰éˆ•
                        prevBtn.disabled = false;
                        nextBtn.disabled = false;
                        
                        // é‡ç½®åˆ°ç¬¬ä¸€æ­¥
                        solver.currentStep = 0;
                        
                        // é¡¯ç¤ºçµæœ
                        displaySolution();
                        displayTableau();
                        updateControls();
                        updateProgress();
                        
                        // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                        showSuccess(`æ±‚è§£å®Œæˆï¼ç¶“é ${solver.iterationCount} æ¬¡è¿­ä»£æ‰¾åˆ°æœ€å„ªè§£ã€‚`);
                        
                    } catch (error) {
                        showError(error.message);
                        console.error('æ±‚è§£éŒ¯èª¤:', error);
                    } finally {
                        // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
                        solveBtn.textContent = 'ğŸš€ æ±‚è§£å•é¡Œ';
                        solveBtn.disabled = false;
                    }
                }, 100); // çŸ­æš«å»¶é²ä»¥é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
                
            } catch (error) {
                showError(error.message);
                solveBtn.textContent = 'ğŸš€ æ±‚è§£å•é¡Œ';
                solveBtn.disabled = false;
            }
        });
        
        // ä¸Šä¸€æ­¥æŒ‰éˆ•
        prevBtn.addEventListener('click', () => {
            if (solver.currentStep > 0) {
                solver.currentStep--;
                displayTableau();
                updateControls();
                updateProgress();
            }
        });
        
        // ä¸‹ä¸€æ­¥æŒ‰éˆ•
        nextBtn.addEventListener('click', () => {
            if (solver.currentStep < solver.history.length - 1) {
                solver.currentStep++;
                displayTableau();
                updateControls();
                updateProgress();
            }
        });
        
        // é‡ç½®æŒ‰éˆ•
        resetBtn.addEventListener('click', () => {
            solver.reset();
            tableauContainer.innerHTML = '<p class="step-info">è¼¸å…¥å•é¡Œä¸¦é»æ“Š"æ±‚è§£"æŒ‰éˆ•å¾Œï¼Œé€™è£¡å°‡é¡¯ç¤ºè¨ˆç®—éç¨‹ã€‚</p>';
            stepDescription.textContent = 'é»æ“Š"æ±‚è§£"æŒ‰éˆ•é–‹å§‹è¨ˆç®—ã€‚æ±‚è§£å®Œæˆå¾Œï¼Œä½¿ç”¨"ä¸‹ä¸€æ­¥"æŒ‰éˆ•æŸ¥çœ‹å–®å½¢æ³•çš„æ¯ä¸€æ­¥é‹ç®—éç¨‹ã€‚';
            prevBtn.disabled = true;
            nextBtn.disabled = true;
            
            // é‡ç½®é€²åº¦
            stepCounter.textContent = '0 / 0';
            progressFill.style.width = '0%';
            
            // é‡ç½®è§£é¡¯ç¤º
            solutionVariables.innerHTML = `
                <div class="variable">5nmæ™¶ç‰‡ = <span>0</span> ç‰‡</div>
                <div class="variable">3nmæ™¶ç‰‡ = <span>0</span> ç‰‡</div>
            `;
            optimalValueDisplay.textContent = '0';
            
            // ç§»é™¤è¨Šæ¯
            const existingMessage = document.querySelector('.error-message');
            if (existingMessage) {
                existingMessage.remove();
            }
        });
        
        // é¡¯ç¤ºè§£
        function displaySolution() {
            if (solver.solution.length === 0) return;
            
            let html = '';
            for (let i = 0; i < solver.solution.length; i++) {
                const value = solver.solution[i].toFixed(0);
                const chipType = i === 0 ? '5nmæ™¶ç‰‡' : '3nmæ™¶ç‰‡';
                html += `<div class="variable">${chipType} = <span>${value}</span> ç‰‡</div>`;
            }
            
            solutionVariables.innerHTML = html;
            
            // æ ¼å¼åŒ–åˆ©æ½¤é¡¯ç¤º
            const profit = solver.optimalValue;
            const formattedProfit = Math.round(profit).toLocaleString('zh-TW');
            optimalValueDisplay.textContent = formattedProfit;
        }
        
        // é¡¯ç¤ºå–®å½¢è¡¨
        function displayTableau() {
            const step = solver.getCurrentStep();
            if (!step) {
                tableauContainer.innerHTML = '<p class="step-info">æ²’æœ‰å¯é¡¯ç¤ºçš„æ­¥é©Ÿ</p>';
                return;
            }
            
            stepDescription.innerHTML = `
                <strong>${step.description}</strong><br>
                ${step.details ? `<em style="opacity: 0.8;">${step.details}</em>` : ''}
            `;
            
            let html = `<div class="step-info">
                <h3 class="step-title">
                    <span>ğŸ“Š</span>
                    æ­¥é©Ÿ ${step.step}: ${step.description}
                </h3>
                ${step.details ? `<p style="margin-top: 10px; opacity: 0.9;"><em>${step.details}</em></p>` : ''}
            </div>`;
            
            html += '<table><thead><tr><th style="min-width: 80px;">åŸºè®Šæ•¸</th>';
            
            // æ·»åŠ åˆ—æ¨™é¡Œ (æ±ºç­–è®Šæ•¸)
            for (let j = 0; j < solver.n; j++) {
                const isEntering = j === step.pivotCol;
                html += `<th style="min-width: 60px; ${isEntering ? 'background: linear-gradient(45deg, rgba(52, 152, 219, 0.5), rgba(41, 128, 185, 0.5));' : ''}">${solver.getVariableName(j)}</th>`;
            }
            
            // æ·»åŠ åˆ—æ¨™é¡Œ (é¬†å¼›è®Šæ•¸)
            for (let j = 0; j < solver.m; j++) {
                html += `<th style="min-width: 60px;">sâ‚`.replace('â‚', `${j + 1}`.split('').map(d => 
                    ['â‚€','â‚','â‚‚','â‚ƒ','â‚„','â‚…','â‚†','â‚‡','â‚ˆ','â‚‰'][parseInt(d)]
                ).join('')) + '</th>';
            }
            
            // æ·»åŠ è§£åˆ—æ¨™é¡Œ
            html += '<th style="min-width: 80px;">è§£</th></tr></thead><tbody>';
            
            // æ·»åŠ ç´„æŸè¡Œæ•¸æ“š
            for (let i = 0; i < solver.m; i++) {
                const isLeavingRow = i === step.pivotRow;
                html += `<tr ${isLeavingRow ? 'style="background: rgba(255, 193, 7, 0.1);"' : ''}>`;
                
                // åŸºè®Šæ•¸åç¨±
                const basisVar = solver.getVariableName(step.basis[i]);
                html += `<td class="basis" style="font-weight: bold;">${basisVar}</td>`;
                
                // å–®å½¢è¡¨æ•¸æ“š
                for (let j = 0; j <= solver.n + solver.m; j++) {
                    let cellClass = '';
                    let cellStyle = '';
                    let cellContent = Math.abs(step.tableau[i][j]) < 1e-10 ? '0' : step.tableau[i][j].toFixed(3);
                    
                    // æª¢æŸ¥æ˜¯å¦ç‚ºæ¨è»¸å…ƒç´ 
                    if (i === step.pivotRow && j === step.pivotCol) {
                        cellClass = 'pivot';
                        cellStyle = 'position: relative;';
                    }
                    // æª¢æŸ¥æ˜¯å¦ç‚ºåŸºè®Šæ•¸åˆ—
                    else if (j < solver.n + solver.m && j === step.basis[i]) {
                        cellClass = 'basis';
                    }
                    // æª¢æŸ¥æ˜¯å¦ç‚ºé€²å…¥è®Šæ•¸åˆ—
                    else if (j === step.pivotCol && step.pivotCol >= 0) {
                        cellClass = 'entering';
                    }
                    
                    html += `<td class="${cellClass}" style="${cellStyle}">${cellContent}</td>`;
                }
                
                html += '</tr>';
            }
            
            // æ·»åŠ ç›®æ¨™å‡½æ•¸è¡Œ
            html += '<tr style="background: rgba(0, 0, 0, 0.2); border-top: 2px solid rgba(255, 255, 255, 0.3);">';
            html += '<td style="font-weight: bold; color: var(--warning);"><strong>z</strong></td>';
            
            for (let j = 0; j <= solver.n + solver.m; j++) {
                let cellClass = '';
                let cellStyle = 'font-weight: bold;';
                let cellContent = Math.abs(step.tableau[solver.m][j]) < 1e-10 ? '0' : step.tableau[solver.m][j].toFixed(3);
                
                // æª¢æŸ¥æ˜¯å¦ç‚ºæ¨è»¸åˆ—
                if (j === step.pivotCol && step.pivotRow >= 0) {
                    cellClass = 'entering';
                }
                
                // ç›®æ¨™å‡½æ•¸å€¼ç‰¹åˆ¥æ¨™ç¤º
                if (j === solver.n + solver.m) {
                    cellStyle += ' color: var(--warning); font-size: 1.1em;';
                }
                
                html += `<td class="${cellClass}" style="${cellStyle}">${cellContent}</td>`;
            }
            
            html += '</tr></tbody></table>';
            
            // æ·»åŠ æ¯”ä¾‹æ¸¬è©¦ä¿¡æ¯ï¼ˆå¦‚æœæœ‰æ¨è»¸æ“ä½œï¼‰
            if (step.pivotRow >= 0 && step.pivotCol >= 0) {
                html += '<div style="margin-top: 20px; padding: 15px; background: rgba(155, 89, 182, 0.1); border-radius: 10px; border-left: 4px solid var(--purple);">';
                html += '<h4 style="color: var(--purple); margin-bottom: 10px;">ğŸ” æ¨è»¸é¸æ“‡è©³æƒ…</h4>';
                html += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">';
                
                // é€²å…¥è®Šæ•¸é¸æ“‡
                html += '<div>';
                html += '<strong>é€²å…¥è®Šæ•¸é¸æ“‡ï¼š</strong><br>';
                html += `é¸æ“‡ ${solver.getVariableName(step.pivotCol)}ï¼Œå› ç‚ºå®ƒåœ¨ç›®æ¨™å‡½æ•¸è¡Œä¸­å…·æœ‰`;
                html += solver.objective === 'max' ? 'æœ€è² çš„ä¿‚æ•¸' : 'æœ€æ­£çš„ä¿‚æ•¸';
                html += `ï¼ˆ${step.tableau[solver.m][step.pivotCol].toFixed(3)}ï¼‰`;
                html += '</div>';
                
                // é›¢é–‹è®Šæ•¸é¸æ“‡
                html += '<div>';
                html += '<strong>é›¢é–‹è®Šæ•¸é¸æ“‡ï¼ˆæœ€å°æ¯”ä¾‹æ¸¬è©¦ï¼‰ï¼š</strong><br>';
                html += '<table style="font-size: 0.9em; margin-top: 5px;">';
                html += '<tr><th>åŸºè®Šæ•¸</th><th>è§£å€¼</th><th>ä¿‚æ•¸</th><th>æ¯”ä¾‹</th></tr>';
                
                for (let i = 0; i < solver.m; i++) {
                    const coeff = step.tableau[i][step.pivotCol];
                    const rhs = step.tableau[i][solver.n + solver.m];
                    const ratio = coeff > 1e-10 ? (rhs / coeff).toFixed(3) : 'âˆ';
                    const isLeaving = i === step.pivotRow;
                    
                    html += `<tr ${isLeaving ? 'style="background: rgba(231, 76, 60, 0.2);"' : ''}>`;
                    html += `<td>${solver.getVariableName(step.basis[i])}</td>`;
                    html += `<td>${rhs.toFixed(3)}</td>`;
                    html += `<td>${coeff.toFixed(3)}</td>`;
                    html += `<td>${ratio}${isLeaving ? ' â­' : ''}</td>`;
                    html += '</tr>';
                }
                
                html += '</table>';
                html += '</div>';
                html += '</div>';
                html += '</div>';
            }
            
            tableauContainer.innerHTML = html;
        }
        
        // æ›´æ–°æ§åˆ¶æŒ‰éˆ•ç‹€æ…‹
        function updateControls() {
            const canGoPrev = solver.currentStep > 0;
            const canGoNext = solver.currentStep < solver.history.length - 1;
            
            prevBtn.disabled = !canGoPrev;
            nextBtn.disabled = !canGoNext;
            
            // æ›´æ–°æŒ‰éˆ•æ–‡å­—
            if (canGoNext) {
                const nextStep = solver.history[solver.currentStep + 1];
                nextBtn.innerHTML = `ä¸‹ä¸€æ­¥ â¡ï¸`;
            } else {
                nextBtn.innerHTML = `å·²åˆ°æœ€å¾Œ ğŸ`;
            }
            
            if (canGoPrev) {
                const prevStep = solver.history[solver.currentStep - 1];
                prevBtn.innerHTML = `â¬…ï¸ ä¸Šä¸€æ­¥`;
            } else {
                prevBtn.innerHTML = `â¬…ï¸ ç¬¬ä¸€æ­¥`;
            }
        }
        
        // é è¨­ç¯„ä¾‹åˆ‡æ›åŠŸèƒ½
        const exampleSelector = document.createElement('select');
        exampleSelector.style.cssText = `
            margin-bottom: 15px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        `;
        
        const examples = [
            {
                name: "å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ï¼ˆé è¨­ï¼‰",
                objective: "max",
                function: "800,1200",
                constraints: `4,6,<=,2400
2,2,<=,800
1,3,<=,900
1,0,<=,300
0,1,<=,250`
            },
            {
                name: "ç°¡å–®äºŒè®Šæ•¸å•é¡Œ",
                objective: "max", 
                function: "3,2",
                constraints: `2,1,<=,100
1,1,<=,80
1,0,<=,40`
            },
            {
                name: "è³‡æºåˆ†é…å•é¡Œ",
                objective: "max",
                function: "40,30",
                constraints: `1,1,<=,12
2,1,<=,16
1,0,<=,8`
            }
        ];
        
        examples.forEach((example, index) => {
            const option = document.createElement('option');
            option.value = index;
            option.textContent = example.name;
            exampleSelector.appendChild(option);
        });
        
        exampleSelector.addEventListener('change', (e) => {
            const example = examples[parseInt(e.target.value)];
            document.getElementById('objective').value = example.objective;
            document.getElementById('function').value = example.function;
            document.getElementById('constraints').value = example.constraints;
        });
        
        // å°‡ç¯„ä¾‹é¸æ“‡å™¨æ’å…¥åˆ°å•é¡Œè¼¸å…¥é¢æ¿çš„é–‹å§‹
        const problemInput = document.querySelector('.problem-input');
        const exampleGroup = document.createElement('div');
        exampleGroup.className = 'input-group';
        exampleGroup.innerHTML = '<label for="example-selector">ğŸ“‹ é¸æ“‡ç¯„ä¾‹å•é¡Œ</label>';
        exampleGroup.appendChild(exampleSelector);
        problemInput.insertBefore(exampleGroup, problemInput.firstChild);
        
        // éµç›¤å¿«æ·éµæ”¯æ´
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        if (!solveBtn.disabled) {
                            solveBtn.click();
                        }
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        if (!prevBtn.disabled) {
                            prevBtn.click();
                        }
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        if (!nextBtn.disabled) {
                            nextBtn.click();
                        }
                        break;
                    case 'r':
                        e.preventDefault();
                        resetBtn.click();
                        break;
                }
            }
        });
        
        // æ·»åŠ éµç›¤å¿«æ·éµèªªæ˜
        const shortcutInfo = document.createElement('div');
        shortcutInfo.innerHTML = `
            <div style="margin-top: 20px; padding: 15px; background: rgba(0, 0, 0, 0.1); border-radius: 10px; font-size: 0.9em; opacity: 0.8;">
                <strong>âŒ¨ï¸ éµç›¤å¿«æ·éµï¼š</strong>
                Ctrl+Enter (æ±‚è§£) | Ctrl+â† (ä¸Šä¸€æ­¥) | Ctrl+â†’ (ä¸‹ä¸€æ­¥) | Ctrl+R (é‡ç½®)
            </div>
        `;
        document.querySelector('.instructions').appendChild(shortcutInfo);
        
        // æ·»åŠ åŒ¯å‡ºåŠŸèƒ½
        const exportBtn = document.createElement('button');
        exportBtn.textContent = 'ğŸ“Š åŒ¯å‡ºçµæœ';
        exportBtn.style.cssText = `
            background: linear-gradient(45deg, var(--orange), #d68910);
            margin-top: 10px;
        `;
        
        exportBtn.addEventListener('click', () => {
            if (solver.solution.length === 0) {
                showError('è«‹å…ˆæ±‚è§£å•é¡Œå†åŒ¯å‡ºçµæœ');
                return;
            }
            
            const results = {
                problem: {
                    objective: document.getElementById('objective').value,
                    coefficients: document.getElementById('function').value,
                    constraints: document.getElementById('constraints').value
                },
                solution: {
                    variables: solver.solution,
                    optimalValue: solver.optimalValue,
                    iterations: solver.iterationCount
                },
                steps: solver.history.length
            };
            
            const dataStr = JSON.stringify(results, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `ç·šæ€§è¦åŠƒæ±‚è§£çµæœ_${new Date().toISOString().slice(0,10)}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showSuccess('çµæœå·²åŒ¯å‡ºç‚º JSON æª”æ¡ˆ');
        });
        
        document.querySelector('.controls').appendChild(exportBtn);
        
        // åˆå§‹åŒ–é é¢
        function initPage() {
            // è¼‰å…¥é è¨­ç¯„ä¾‹
            exampleSelector.value = '0';
            exampleSelector.dispatchEvent(new Event('change'));
            
            // æ›´æ–°é€²åº¦é¡¯ç¤º
            updateProgress();
            
            // é¡¯ç¤ºæ­¡è¿è¨Šæ¯
            setTimeout(() => {
                const welcomeDiv = document.createElement('div');
                welcomeDiv.className = 'error-message';
                welcomeDiv.style.background = 'linear-gradient(45deg, rgba(52, 152, 219, 0.2), rgba(41, 128, 185, 0.2))';
                welcomeDiv.style.borderColor = 'var(--secondary)';
                welcomeDiv.style.animation = 'none';
                welcomeDiv.innerHTML = `
                    <strong>ğŸ‰ æ­¡è¿ä½¿ç”¨ç·šæ€§è¦åŠƒå¯è¦–åŒ–å·¥å…·ï¼</strong><br>
                    <em>å·²è¼‰å…¥å°ç©é›»æ™¶ç‰‡ç”Ÿç”¢ç¯„ä¾‹ï¼Œé»æ“Šã€Œæ±‚è§£å•é¡Œã€é–‹å§‹é«”é©—å–®å½¢æ³•çš„è¨ˆç®—éç¨‹ã€‚</em>
                `;
                
                solveBtn.parentNode.insertBefore(welcomeDiv, solveBtn.nextSibling);
                
                setTimeout(() => {
                    if (welcomeDiv.parentNode) {
                        welcomeDiv.style.opacity = '0';
                        welcomeDiv.style.transform = 'translateY(-10px)';
                        setTimeout(() => {
                            if (welcomeDiv.parentNode) {
                                welcomeDiv.parentNode.removeChild(welcomeDiv);
                            }
                        }, 500);
                    }
                }, 4000);
            }, 1000);
        }
        
        // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', initPage);
        
        // æ·»åŠ éŸ¿æ‡‰å¼è¡¨æ ¼æ»¾å‹•æç¤º
        function addScrollHint() {
            const tableauContainer = document.getElementById('tableau-container');
            if (tableauContainer.scrollWidth > tableauContainer.clientWidth) {
                const hint = document.createElement('div');
                hint.style.cssText = `
                    text-align: center;
                    padding: 10px;
                    background: rgba(241, 196, 15, 0.2);
                    color: var(--warning);
                    border-radius: 5px;
                    margin-bottom: 10px;
                    font-size: 0.9em;
                `;
                hint.innerHTML = 'ğŸ‘ˆ è¡¨æ ¼å¯ä»¥å·¦å³æ»‘å‹•æŸ¥çœ‹å®Œæ•´å…§å®¹ ğŸ‘‰';
                tableauContainer.insertBefore(hint, tableauContainer.firstChild);
            }
        }
        
        // ç›£è½çª—å£å¤§å°è®ŠåŒ–
        window.addEventListener('resize', addScrollHint);
        
    </script>
</body>
</html>